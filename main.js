!function(){"use strict";var e={d:function(t,r){for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}};function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function r(e,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===t(i)?i:String(i)),o)}var i}e.d({},{M:function(){return ee}});var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.authorization="85c06b76-d1bb-40cc-b9fa-fda6b61002da",this.baseUrl="https://around.nomoreparties.co/v1/web_ptbr_04"}var t,n;return t=e,(n=[{key:"fetchInitialCards",value:function(){return fetch("".concat(this.baseUrl,"/cards"),{headers:{authorization:this.authorization}}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.error("Erro ao buscar os cards iniciais:",e),[]}))}},{key:"updateProfilePicture",value:function(e){return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this.authorization,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then((function(e){return e.json()})).then((function(e){return e.avatar})).catch((function(e){throw console.error("Erro ao atualizar o avatar:",e),e}))}},{key:"updateProfile",value:function(e){return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:{authorization:this.authorization,"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){throw console.error("Erro ao atualizar o perfil:",e),e}))}},{key:"getProfile",value:function(){return fetch("".concat(this.baseUrl,"/users/me"),{headers:{authorization:this.authorization}}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){throw console.error("Erro ao carregar as informações do perfil:",e),e}))}},{key:"addCard",value:function(e){return fetch("".concat(this.baseUrl,"/cards"),{method:"POST",headers:{authorization:this.authorization,"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){throw console.error("Erro ao adicionar o card:",e),e}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this.authorization}}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){throw console.error("Erro ao excluir o card:",e),e}))}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===o(i)?i:String(i)),n)}var i}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.selector=document.querySelector(t)}var t,r;return t=e,(r=[{key:"open",value:function(){this.selector.classList.add("modal-opened")}},{key:"close",value:function(){this.selector.classList.remove("modal-opened")}},{key:"_handleEscClose",value:function(){this.close(),ee.classList.remove("page_opacity")}},{key:"setEventListeners",value:function(){this.close(),ee.classList.remove("page_opacity")}}])&&i(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===c(o)?o:String(o)),n)}var o}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=s(n);if(o){var r=s(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(r=[{key:"open",value:function(){this.selector.classList.add("modal-image__active")}},{key:"close",value:function(){this.selector.classList.remove("modal-image__active")}}])&&u(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(a);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function y(e){var t=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===d(t)?t:String(t)}var p=new n,v=document.querySelector(".modal-image"),h=document.querySelector(".modal-image__image"),b=document.querySelector(".modal-image__button"),_=document.querySelector(".modal-image__title"),S=document.querySelector(".page"),g=new f(".modal-image"),w=document.querySelector(".modal-delete"),k=document.querySelector(".modal__button-close_close"),E=document.querySelector(".modal__button_confirm"),L=function(){function e(t,r,n,o,i){var a,c,u,l=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a=this,u=function(){l._element.remove(),w.classList.remove("modal_delete"),S.classList.remove("page_opacity"),E.removeEventListener("click",l._handleDelete)},(c=y(c="_handleDelete"))in a?Object.defineProperty(a,c,{value:u,enumerable:!0,configurable:!0,writable:!0}):a[c]=u,this._imageLink=t,this._imageTitle=r,this._element=this._getTemplate(),this._setEventListeners(),this._owner=n,this._id=o,this._likesCount=i,this._isLiked=!1}var t,r;return t=e,(r=[{key:"_getTemplate",value:function(){return document.querySelector(".card-template").content.querySelector(".element").cloneNode(!0)}},{key:"handleClick",value:function(){var e=this._element.querySelector(".element__image").getAttribute("src");h.setAttribute("src",e);var t=this._element.querySelector(".element__image").getAttribute("alt");h.setAttribute("alt",t);var r=this._element.querySelector(".element__title").textContent;_.textContent=r,g.open(),S.classList.add("page_opacity")}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".element__button_image").addEventListener("click",(function(t){t.target.classList.toggle("element__button_active"),t.target.classList.contains("element__button_active")?e.addLike():e.removeLike()})),this._element.querySelector(".element__delete").addEventListener("click",(function(){w.classList.add("modal_delete"),S.classList.add("page_opacity"),E.addEventListener("click",(function(){e._handleDelete(),e.deleteCardFromServer()}))})),this._element.querySelector(".element__image").addEventListener("click",this.handleClick.bind(this)),b.addEventListener("click",(function(){v.classList.remove("modal-image__active"),S.classList.remove("page_opacity")})),k.addEventListener("click",(function(){w.classList.remove("modal_delete"),S.classList.remove("page_opacity"),E.removeEventListener("click",e._handleDelete)}))}},{key:"generateCard",value:function(){return this._element.querySelector(".element__image").alt="Card contendo a foto e o titulo de ".concat(this._imageTitle),this._element.querySelector(".element__image").src=this._imageLink,this._element.querySelector(".element__title").textContent=this._imageTitle,this._element.querySelector(".element__delete").dataset.cardId=this._owner._id,this._element.querySelector(".element__delete").dataset.idCard=this._id,this._element.querySelector(".element__number").textContent=this._likesCount,this._element}},{key:"addCardToServer",value:function(){var e={name:this._imageTitle,link:this._imageLink};p.addCard(e).then((function(e){console.log("Card added to server:",e)})).catch((function(e){console.error("Failed to add card to server:",e)}))}},{key:"deleteCardFromServer",value:function(){var e=this,t=this._element.querySelector(".element__delete").dataset.idCard;p.deleteCard(t).then((function(t){t.ok?(console.log("Card deleted from server."),e._element.remove()):console.error("Failed to delete card from server:",t.status,t.statusText),E.removeEventListener("click",e._handleDelete)})).catch((function(e){console.error("Failed to delete card from server:",e)}))}},{key:"addLike",value:function(){var e=this;p.addLikeToCard(this._id).then((function(t){e._likesCount=t.likes.length,e._element.querySelector(".element__number").textContent=e._likesCount})).catch((function(e){console.error("Failed to add like to card:",e)}))}},{key:"removeLike",value:function(){var e=this;p.removeLikeFromCard(this._id).then((function(t){e._likesCount=t.likes.length,e._element.querySelector(".element__number").textContent=e._likesCount})).catch((function(e){console.error("Failed to remove like from card:",e)}))}}])&&m(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),j=document.querySelector(".modal__input_name"),P=document.querySelector(".modal__input_job"),q=document.querySelector(".modal__input_save-photo"),C=document.querySelector(".profile__name"),O=document.querySelector(".profile__about"),T=document.querySelector(".profile__image");function I(e){e.classList.toggle("page_opacity")}function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==A(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===A(o)?o:String(o)),n)}var o}var x=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=new n}var t,r;return t=e,(r=[{key:"getUserInfo",value:function(){return{name:j.value,job:P.value,photo:q.value}}},{key:"setUserInfo",value:function(e,t,r){C.textContent=e,O.textContent=t,T.src=r}},{key:"updateProfile",value:function(e){this.api.updateProfile(e).then((function(e){console.log("Dados de perfil atualizados:",e)})).catch((function(e){console.error("Erro ao atualizar o perfil:",e)}))}},{key:"initializePage",value:function(){var e=this;this.api.getProfile().then((function(t){var r=t.name,n=t.about,o=t.avatar;e.setUserInfo(r,n,o)})).catch((function(e){console.error("Erro ao carregar as informações do perfil:",e)}))}}])&&z(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function D(e){e.preventDefault();var t=new x,r=t.getUserInfo();t.setUserInfo(r.name,r.job,r.photo),t.updateProfile({name:r.name,about:r.job})}function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function U(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==R(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===R(o)?o:String(o)),n)}var o}var B=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.form=t,this.inputList=Array.from(t.querySelectorAll(".modal__input")),this.buttonElement=t.querySelector(".modal__button"),this.errorMessages={valueMissing:"Campo é obrigatório.",typeMismatch:"Por favor, insira um endereço web",tooShort:"Aumente esse texto para 2 caracteres ou mais."}}var t,r;return t=e,(r=[{key:"_showInputError",value:function(e,t){var r=this.form.querySelector(".".concat(e.id,"-error"));e.classList.add("modal__input_type_error"),r.textContent=t,r.classList.add("modal__input-error_active")}},{key:"_hideInputError",value:function(e){var t=this.form.querySelector(".".concat(e.id,"-error"));e.classList.remove("modal__input_type_error"),t.classList.remove("modal__input-error_active"),t.textContent=""}},{key:"_isValid",value:function(e){if(e.validity.valid)this._hideInputError(e);else{var t=Object.keys(this.errorMessages).find((function(t){return e.validity[t]}));this._showInputError(e,t?this.errorMessages[t]:"Verifique os campos digitados.")}}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this.buttonElement.classList.add("button__inactive"):this.buttonElement.classList.remove("button__inactive")}},{key:"_hasInvalidInput",value:function(){return this.inputList.some((function(e){return!e.validity.valid}))}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(),this.inputList.forEach((function(t){t.addEventListener("input",(function(){e._isValid(t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this.form.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}},{key:"resetValidation",value:function(){var e=this;this.inputList.forEach((function(t){e._hideInputError(t)})),this._toggleButtonState()}}])&&U(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==V(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===V(o)?o:String(o)),n)}var o}var M=function(){function e(t,r){var n=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=n,this._renderer=o,this._container=document.querySelector(r)}var t,r;return t=e,(r=[{key:"render",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&F(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function J(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==N(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===N(o)?o:String(o)),n)}var o}function H(){return H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=G(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},H.apply(this,arguments)}function $(e,t){return $=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$(e,t)}function G(e){return G=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},G(e)}var K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=G(n);if(o){var r=G(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e)).submitCallback=t,r.form=r.selector.querySelector(".modal__form"),r.closeButton=r.selector.querySelector(".modal__button-close"),r.formValidator=new B(r.form),r}return t=a,(r=[{key:"_getInputValues",value:function(){var e=this.form.querySelectorAll(".modal__input"),t={};return e.forEach((function(e){t[e.name]=e.value})),t}},{key:"open",value:function(){H(G(a.prototype),"open",this).call(this),this.formValidator.resetValidation()}},{key:"setEventListeners",value:function(){var e=this;H(G(a.prototype),"setEventListeners",this).call(this),this.closeButton.addEventListener("click",(function(){e.close()}))}},{key:"close",value:function(){H(G(a.prototype),"close",this).call(this),this.form.reset()}}])&&J(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(a);function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}window.addEventListener("DOMContentLoaded",(function(){(new x).initializePage()}));var W=new n,X=[];W.fetchInitialCards().then((function(e){var t;X.push.apply(X,function(e){if(Array.isArray(e))return Q(e)}(t=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return Q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Q(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),e.forEach((function(e){"436e74c115dfe006750ac205"===e.owner._id&&setTimeout((function(){document.querySelectorAll(".element__delete").forEach((function(e){"436e74c115dfe006750ac205"===e.dataset.cardId&&e.classList.add("element__delete_active")}))}),100)})),ce.render()})),console.log(X);var Y=document.querySelector(".button-edit"),Z=document.querySelector(".modal__button-close"),ee=document.querySelector(".page"),te=new K(".modal",D),re=new K(".modal-add",D),ne=new f(".modal-image");document.querySelector(".modal_delete"),Y.addEventListener("click",(function(){I(ee),te.open()})),Z.addEventListener("click",(function(){I(ee),te.close()}));var oe=document.querySelector(".button-add"),ie=document.querySelector(".button-close");oe.addEventListener("click",(function(){I(ee),re.open()})),ie.addEventListener("click",(function(){I(ee),re.close()}));var ae=document.querySelector(".modal__form");ae.addEventListener("submit",(function(e){D(e),te.close(),I(ee)}));var ce=new M({items:X,renderer:function(e){var t=new L(e.link,e.name,e.owner,e._id,e.likes.length).generateCard();ce.addItem(t)}},".elements"),ue=document.querySelector(".modal-add"),le=document.querySelector(".modal__form_add");ue.addEventListener("submit",(function(e){e.preventDefault();var t=document.querySelector(".modal__input_title"),r=document.querySelector(".modal__input_link"),n=new L(r.value,t.value,{_id:"436e74c115dfe006750ac205"});n.addCardToServer();var o=n.generateCard();document.querySelector(".elements").prepend(o),re.close(),I(ee),le.reset()})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&(te._handleEscClose(),re._handleEscClose(),ne.close())})),ee.addEventListener("mouseup",(function(e){te.setEventListeners(),re.setEventListeners(),ne.close()})),Y.removeEventListener("click",(function(){I(ee),te.open()})),Z.removeEventListener("click",(function(){I(ee),te.close()})),oe.removeEventListener("click",(function(){I(ee),re.open()})),ie.removeEventListener("click",(function(){I(ee),re.close()})),ae.removeEventListener("submit",(function(e){D(e),te.close(),I(ee)})),ue.removeEventListener("submit",(function(e){e.preventDefault();var t=document.querySelector(".modal__input_title"),r=document.querySelector(".modal__input_link"),n=new L(r.value,t.value).generateCard();document.querySelector(".elements").prepend(n),re.close(),I(ee),le.reset()})),document.removeEventListener("keydown",(function(e){"Escape"===e.key&&(te._handleEscClose(),re._handleEscClose(),ne.close())})),ee.removeEventListener("mouseup",(function(e){te.setEventListeners(),re.setEventListeners(),ne.close()})),Array.from(document.querySelectorAll(".modal__form")).forEach((function(e){new B(e).enableValidation()}));var se=document.querySelector(".profile__image_overlay"),fe=document.querySelector(".modal_photo");se.addEventListener("click",(function(){document.querySelector(".modal_photo").classList.add("modal-photo"),ee.classList.add("page_opacity")})),document.querySelector(".button-close-photo").addEventListener("click",(function(){fe.classList.remove("modal-photo"),ee.classList.remove("page_opacity")}));var de=document.querySelector(".profile__image"),me=document.querySelector(".modal__button_save"),ye=document.querySelector(".modal__input_save-photo"),pe=document.querySelector(".modal__form_editPhoto");me.addEventListener("click",(function(){W.updateProfilePicture(ye.value),de.src=ye.value,fe.classList.remove("modal-photo"),ee.classList.remove("page_opacity"),pe.reset()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Qi9DLFNBQVNDLGNBQWMsZ0JBQ2pGQyxVQUFVQyxJQUFJLGVBQzVCRyxHQUFLSixVQUFVQyxJQUFJLGVBQ3JCLElBR3dCSCxTQUFTQyxjQUFjLHVCQUMvQjhDLGlCQUFpQixTQUFTLFdBQ3hDMEgsR0FBY3ZLLFVBQVVFLE9BQU8sZUFDL0JFLEdBQUtKLFVBQVVFLE9BQU8sZUFDeEIsSUFHQSxJQUFNc0ssR0FBZTFLLFNBQVNDLGNBQWMsbUJBQ3RDMEssR0FBa0IzSyxTQUFTQyxjQUFjLHVCQUN6QzJLLEdBQXNCNUssU0FBU0MsY0FBYyw0QkFDN0M0SyxHQUF3QjdLLFNBQVNDLGNBQWMsMEJBQ3JEMEssR0FBZ0I1SCxpQkFBaUIsU0FBUyxXQUN4Q3BDLEVBQUltSyxxQkFBcUJGLEdBQW9CcE0sT0FDN0NrTSxHQUFhaEgsSUFBTWtILEdBQW9CcE0sTUFDdkNpTSxHQUFjdkssVUFBVUUsT0FBTyxlQUMvQkUsR0FBS0osVUFBVUUsT0FBTyxnQkFDdEJ5SyxHQUFzQmpDLE9BQ3hCLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X3B0YnIvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9wdGJyL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X3B0YnIvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X3B0YnIvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9wdGJyLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9wdGJyLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9wdGJyLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X3B0YnIvLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9wdGJyLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9wdGJyLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X3B0YnIvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfcHRici8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9wdGJyLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBkZWZpbml0aW9uKSB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iaiwgcHJvcCkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7IH0iLCJleHBvcnQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuYXV0aG9yaXphdGlvbiA9IFwiODVjMDZiNzYtZDFiYi00MGNjLWI5ZmEtZmRhNmI2MTAwMmRhXCI7XHJcbiAgICB0aGlzLmJhc2VVcmwgPSBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvd2ViX3B0YnJfMDRcIjtcclxuICB9XHJcblxyXG4gIGZldGNoSW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLmF1dGhvcml6YXRpb25cclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm8gYW8gYnVzY2FyIG9zIGNhcmRzIGluaWNpYWlzOlwiLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVByb2ZpbGVQaWN0dXJlKGltYWdlVXJsKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5hdXRob3JpemF0aW9uLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IGltYWdlVXJsXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSlcclxuICAgICAgLnRoZW4oKHVwZGF0ZWRSZXN1bHQpID0+IHtcclxuICAgICAgICByZXR1cm4gdXBkYXRlZFJlc3VsdC5hdmF0YXI7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJybyBhbyBhdHVhbGl6YXIgbyBhdmF0YXI6XCIsIGVycm9yKTtcclxuICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVQcm9maWxlKGRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuYXV0aG9yaXphdGlvbixcclxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxyXG4gICAgfSlcclxuICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXHJcbiAgICAgIC50aGVuKCh1cGRhdGVkUmVzdWx0KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHVwZGF0ZWRSZXN1bHQ7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJybyBhbyBhdHVhbGl6YXIgbyBwZXJmaWw6XCIsIGVycm9yKTtcclxuICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRQcm9maWxlKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLmF1dGhvcml6YXRpb25cclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxyXG4gICAgICAudGhlbihkYXRhID0+IHtcclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJybyBhbyBjYXJyZWdhciBhcyBpbmZvcm1hw6fDtWVzIGRvIHBlcmZpbDpcIiwgZXJyb3IpO1xyXG4gICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZENhcmQoY2FyZERhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5hdXRob3JpemF0aW9uLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGNhcmREYXRhKVxyXG4gICAgfSlcclxuICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXHJcbiAgICAgIC50aGVuKChjcmVhdGVkQ2FyZCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVkQ2FyZDtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvIGFvIGFkaWNpb25hciBvIGNhcmQ6XCIsIGVycm9yKTtcclxuICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLmF1dGhvcml6YXRpb25cclxuICAgICAgfVxyXG4gICAgfSlcclxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxyXG4gICAgICAudGhlbihkYXRhID0+IHtcclxuICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJybyBhbyBleGNsdWlyIG8gY2FyZDpcIiwgZXJyb3IpO1xyXG4gICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIFxyXG59XHJcbiIsImltcG9ydCB7IHBhZ2UgfSBmcm9tIFwiLi4vcGFnZXNcIjtcclxuXHJcbi8vY2xhc3NlIHJlc3BvbnNhdmVsIHBhcmEgZmF6ZXIgYWJyaXIgb3MgbW9kYWlzXHJcbmV4cG9ydCBjbGFzcyBQb3B1cCB7XHJcbiAgLy91bSBwYXJhbWV0cm8gcXVlIMOpIG8gc2VsZXRvciBjc3NcclxuICBjb25zdHJ1Y3RvcihzZWxlY3Rvcikge1xyXG4gICAgdGhpcy5zZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuc2VsZWN0b3IuY2xhc3NMaXN0LmFkZCgnbW9kYWwtb3BlbmVkJyk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSAoKSB7XHJcbiAgICB0aGlzLnNlbGVjdG9yLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLW9wZW5lZCcpO1xyXG4gIH1cclxuXHJcbiAgLy9mZWNoYSBtb2RhbCBxbmQgYXBlcnRvIGVzY1xyXG4gIF9oYW5kbGVFc2NDbG9zZSAoKSB7XHJcbiAgICB0aGlzLmNsb3NlKClcclxuICAgIFxyXG4gICAgcGFnZS5jbGFzc0xpc3QucmVtb3ZlKCdwYWdlX29wYWNpdHknKTtcclxuICAgIFxyXG4gIH1cclxuXHJcbiAgLy9mZWNoYSBvIG1vZGFsIHF1YW5kbyBjbGljYXIgZm9yYSBkZWxlXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMgKCkge1xyXG4gICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgcGFnZS5jbGFzc0xpc3QucmVtb3ZlKCdwYWdlX29wYWNpdHknKTtcclxuICAgIFxyXG4gIH1cclxuXHJcbn0iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHNlbGVjdG9yKTtcclxuICB9XHJcbiAgLy9hbHRlcmVpIG8gbWV0b2RvIG9wZW4gZG8gcGFpIHBhcmEgYXBlbmFzIHN1YnN0aXR1aXIgYSBjbGFzc2VcclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5zZWxlY3Rvci5jbGFzc0xpc3QuYWRkKCdtb2RhbC1pbWFnZV9fYWN0aXZlJyk7ICBcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5zZWxlY3Rvci5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbC1pbWFnZV9fYWN0aXZlJyk7XHJcbiAgfVxyXG5cclxufVxyXG5cclxuIiwiaW1wb3J0IHsgQXBpIH0gZnJvbSBcIi4vQXBpXCI7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSBcIi4vUG9wdXBXaXRoSW1hZ2VcIjtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoKTtcclxuY29uc3QgbW9kYWxJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1pbWFnZScpO1xyXG5jb25zdCBtb2RhbEltZ0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtaW1hZ2VfX2ltYWdlJyk7XHJcbmNvbnN0IGJ0bkNsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWltYWdlX19idXR0b24nKTtcclxuY29uc3QgbW9kYWxUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1pbWFnZV9fdGl0bGUnKTtcclxuY29uc3QgcGFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wYWdlJyk7XHJcbmNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKCcubW9kYWwtaW1hZ2UnKTtcclxuY29uc3QgbW9kYWxEZWxldGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtZGVsZXRlJyk7XHJcbmNvbnN0IGNsb3NlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19idXR0b24tY2xvc2VfY2xvc2UnKTtcclxuY29uc3QgY29uZmlybUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fYnV0dG9uX2NvbmZpcm0nKTtcclxuXHJcbmV4cG9ydCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihpbWFnZUxpbmssIGltYWdlVGl0bGUsIG93bmVyLCBpZENhcmQsIG51bWJlck9mTGlrZXMpIHtcclxuICAgIHRoaXMuX2ltYWdlTGluayA9IGltYWdlTGluaztcclxuICAgIHRoaXMuX2ltYWdlVGl0bGUgPSBpbWFnZVRpdGxlO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fb3duZXIgPSBvd25lcjtcclxuICAgIHRoaXMuX2lkID0gaWRDYXJkO1xyXG4gICAgdGhpcy5fbGlrZXNDb3VudCA9IG51bWJlck9mTGlrZXM7XHJcbiAgICB0aGlzLl9pc0xpa2VkID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuY2FyZC10ZW1wbGF0ZScpXHJcbiAgICAgIC5jb250ZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudCcpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlQ2xpY2soKSB7XHJcbiAgICBjb25zdCBzcmNWYWwgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pbWFnZScpLmdldEF0dHJpYnV0ZSgnc3JjJyk7XHJcbiAgICBtb2RhbEltZ0VsZW1lbnQuc2V0QXR0cmlidXRlKCdzcmMnLCBzcmNWYWwpO1xyXG4gICAgY29uc3QgaW1nQWx0ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faW1hZ2UnKS5nZXRBdHRyaWJ1dGUoJ2FsdCcpO1xyXG4gICAgbW9kYWxJbWdFbGVtZW50LnNldEF0dHJpYnV0ZSgnYWx0JywgaW1nQWx0KTtcclxuICAgIGNvbnN0IGltYWdlVGl0bGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X190aXRsZScpLnRleHRDb250ZW50O1xyXG4gICAgbW9kYWxUaXRsZS50ZXh0Q29udGVudCA9IGltYWdlVGl0bGU7XHJcblxyXG4gICAgcG9wdXBXaXRoSW1hZ2Uub3BlbigpO1xyXG4gICAgcGFnZS5jbGFzc0xpc3QuYWRkKCdwYWdlX29wYWNpdHknKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2J1dHRvbl9pbWFnZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ2VsZW1lbnRfX2J1dHRvbl9hY3RpdmUnKTtcclxuXHJcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZWxlbWVudF9fYnV0dG9uX2FjdGl2ZScpKSB7XHJcbiAgICAgICAgdGhpcy5hZGRMaWtlKCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVMaWtlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2RlbGV0ZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICBtb2RhbERlbGV0ZS5jbGFzc0xpc3QuYWRkKCdtb2RhbF9kZWxldGUnKTtcclxuICAgICAgcGFnZS5jbGFzc0xpc3QuYWRkKCdwYWdlX29wYWNpdHknKTtcclxuICAgICAgY29uZmlybUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGUoKTtcclxuICAgICAgICB0aGlzLmRlbGV0ZUNhcmRGcm9tU2VydmVyKCk7XHJcbiAgICAgIH0pXHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pbWFnZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICBidG5DbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgbW9kYWxJbWFnZS5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbC1pbWFnZV9fYWN0aXZlJyk7XHJcbiAgICAgIHBhZ2UuY2xhc3NMaXN0LnJlbW92ZSgncGFnZV9vcGFjaXR5Jyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgbW9kYWxEZWxldGUuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWxfZGVsZXRlJyk7XHJcbiAgICAgIHBhZ2UuY2xhc3NMaXN0LnJlbW92ZSgncGFnZV9vcGFjaXR5Jyk7XHJcbiAgICAgIGNvbmZpcm1CdXR0b24ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVEZWxldGUpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRGVsZXRlID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICAgIG1vZGFsRGVsZXRlLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsX2RlbGV0ZScpO1xyXG4gICAgcGFnZS5jbGFzc0xpc3QucmVtb3ZlKCdwYWdlX29wYWNpdHknKTtcclxuICAgIGNvbmZpcm1CdXR0b24ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVEZWxldGUpO1xyXG4gIH1cclxuXHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faW1hZ2UnKS5hbHQgPSBgQ2FyZCBjb250ZW5kbyBhIGZvdG8gZSBvIHRpdHVsbyBkZSAke3RoaXMuX2ltYWdlVGl0bGV9YDtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2ltYWdlJykuc3JjID0gdGhpcy5faW1hZ2VMaW5rO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fdGl0bGUnKS50ZXh0Q29udGVudCA9IHRoaXMuX2ltYWdlVGl0bGU7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19kZWxldGUnKS5kYXRhc2V0LmNhcmRJZCA9IHRoaXMuX293bmVyLl9pZDtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2RlbGV0ZScpLmRhdGFzZXQuaWRDYXJkID0gdGhpcy5faWQ7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19udW1iZXInKS50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzQ291bnQ7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBhZGRDYXJkVG9TZXJ2ZXIoKSB7XHJcbiAgICBjb25zdCBjYXJkRGF0YSA9IHtcclxuICAgICAgbmFtZTogdGhpcy5faW1hZ2VUaXRsZSxcclxuICAgICAgbGluazogdGhpcy5faW1hZ2VMaW5rXHJcbiAgICB9O1xyXG4gIFxyXG4gICAgYXBpLmFkZENhcmQoY2FyZERhdGEpXHJcbiAgICAgIC50aGVuKChjcmVhdGVkQ2FyZCkgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdDYXJkIGFkZGVkIHRvIHNlcnZlcjonLCBjcmVhdGVkQ2FyZCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gYWRkIGNhcmQgdG8gc2VydmVyOicsIGVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkRnJvbVNlcnZlcigpIHtcclxuICAgIGNvbnN0IGNhcmRJZCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2RlbGV0ZScpLmRhdGFzZXQuaWRDYXJkO1xyXG4gIFxyXG4gICAgYXBpLmRlbGV0ZUNhcmQoY2FyZElkKVxyXG4gICAgICAudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnQ2FyZCBkZWxldGVkIGZyb20gc2VydmVyLicpO1xyXG4gICAgICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGRlbGV0ZSBjYXJkIGZyb20gc2VydmVyOicsIHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2Uuc3RhdHVzVGV4dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbmZpcm1CdXR0b24ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVEZWxldGUpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGRlbGV0ZSBjYXJkIGZyb20gc2VydmVyOicsIGVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRMaWtlKCkge1xyXG4gICAgYXBpLmFkZExpa2VUb0NhcmQodGhpcy5faWQpXHJcbiAgICAgIC50aGVuKGRhdGEgPT4ge1xyXG4gICAgICAgIHRoaXMuX2xpa2VzQ291bnQgPSBkYXRhLmxpa2VzLmxlbmd0aDtcclxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19udW1iZXInKS50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzQ291bnQ7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gYWRkIGxpa2UgdG8gY2FyZDonLCBlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlTGlrZSgpIHtcclxuICAgIGFwaS5yZW1vdmVMaWtlRnJvbUNhcmQodGhpcy5faWQpXHJcbiAgICAgIC50aGVuKGRhdGEgPT4ge1xyXG4gICAgICAgIHRoaXMuX2xpa2VzQ291bnQgPSBkYXRhLmxpa2VzLmxlbmd0aDtcclxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19udW1iZXInKS50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzQ291bnQ7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gcmVtb3ZlIGxpa2UgZnJvbSBjYXJkOicsIGVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsIi8qdmFyaWF2ZWlzIGFiYWl4byBldSBwZWdvIG9zIHJlc3BlY3Rpdm9zIGlucHV0cyBkbyBmb3JtdWzDoXJpbyovXHJcbmV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2lucHV0X25hbWUnKTtcclxuZXhwb3J0IGNvbnN0IGpvYklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19pbnB1dF9qb2InKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVQaG90b0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19pbnB1dF9zYXZlLXBob3RvJyk7XHJcblxyXG4vKnZhcmlhdmVpcyBxdWUgcGVnYW0gb3MgbG9jYWlzIGRvIGh0bWwgYW9uZGUgc2VyYW8gc2Fsdm9zIG9zIGRhZG9zIGRvIGVkaXQgcHJvZmlsZSovXHJcbmV4cG9ydCBjb25zdCBuYW1lRmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fbmFtZScpO1xyXG5leHBvcnQgY29uc3Qgam9iRmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWJvdXQnKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVQaG90b0ZpZWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2ltYWdlJyk7XHJcblxyXG4vL0Z1bsOnw6NvIHBhcmEgZmF6ZXIgYSBwYWdpbmEgZmljYXIgb3BhY2EgcXVhbmRvIG8gbW9kYWwgZm9yIGFiZXJ0by5cclxuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZVBhZ2VPcGFjaXR5IChwYWdlKSB7XHJcbiAgcGFnZS5jbGFzc0xpc3QudG9nZ2xlKCdwYWdlX29wYWNpdHknKTtcclxufSIsImltcG9ydCB7IEFwaSB9IGZyb20gXCIuL0FwaS5qc1wiO1xyXG5pbXBvcnQgeyBuYW1lSW5wdXQsIGpvYklucHV0LCBuYW1lRmllbGQsIGpvYkZpZWxkLCBwcm9maWxlUGhvdG9GaWVsZCwgcHJvZmlsZVBob3RvSW5wdXQgfSBmcm9tIFwiLi4vdXRpbHMvdXRpbHMuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLmFwaSA9IG5ldyBBcGkoKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogbmFtZUlucHV0LnZhbHVlLFxyXG4gICAgICBqb2I6IGpvYklucHV0LnZhbHVlLFxyXG4gICAgICBwaG90bzogcHJvZmlsZVBob3RvSW5wdXQudmFsdWVcclxuICAgICAgXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8obmFtZSwgam9iLCBwaG90bykge1xyXG4gICAgbmFtZUZpZWxkLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIGpvYkZpZWxkLnRleHRDb250ZW50ID0gam9iO1xyXG4gICAgcHJvZmlsZVBob3RvRmllbGQuc3JjID0gcGhvdG87XHJcbiAgfVxyXG5cclxuICB1cGRhdGVQcm9maWxlKGRhdGEpIHtcclxuICAgIHRoaXMuYXBpLnVwZGF0ZVByb2ZpbGUoZGF0YSlcclxuICAgICAgLnRoZW4odXBkYXRlZFJlc3VsdCA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJEYWRvcyBkZSBwZXJmaWwgYXR1YWxpemFkb3M6XCIsIHVwZGF0ZWRSZXN1bHQpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvIGFvIGF0dWFsaXphciBvIHBlcmZpbDpcIiwgZXJyb3IpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGluaXRpYWxpemVQYWdlKCkge1xyXG4gICAgdGhpcy5hcGkuZ2V0UHJvZmlsZSgpXHJcbiAgICAgIC50aGVuKGRhdGEgPT4ge1xyXG4gICAgICAgIGNvbnN0IHsgbmFtZSwgYWJvdXQsIGF2YXRhciB9ID0gZGF0YTtcclxuICAgICAgICB0aGlzLnNldFVzZXJJbmZvKG5hbWUsIGFib3V0LCBhdmF0YXIpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvIGFvIGNhcnJlZ2FyIGFzIGluZm9ybWHDp8O1ZXMgZG8gcGVyZmlsOlwiLCBlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGV2dCkge1xyXG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICBjb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbygpO1xyXG4gIGNvbnN0IHVzZXJJbmZvRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckluZm9EYXRhLm5hbWUsIHVzZXJJbmZvRGF0YS5qb2IsIHVzZXJJbmZvRGF0YS5waG90byk7XHJcbiAgdXNlckluZm8udXBkYXRlUHJvZmlsZSh7XHJcbiAgICBuYW1lOiB1c2VySW5mb0RhdGEubmFtZSxcclxuICAgIGFib3V0OiB1c2VySW5mb0RhdGEuam9iXHJcbiAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplUGFnZSgpIHtcclxuICBjb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbygpO1xyXG4gIHVzZXJJbmZvLmluaXRpYWxpemVQYWdlKCk7XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGZvcm0pIHtcclxuICAgIHRoaXMuZm9ybSA9IGZvcm07XHJcbiAgICB0aGlzLmlucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcubW9kYWxfX2lucHV0JykpO1xyXG4gICAgdGhpcy5idXR0b25FbGVtZW50ID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2J1dHRvbicpO1xyXG4gICAgdGhpcy5lcnJvck1lc3NhZ2VzID0ge1xyXG4gICAgICB2YWx1ZU1pc3Npbmc6ICdDYW1wbyDDqSBvYnJpZ2F0w7NyaW8uJyxcclxuICAgICAgdHlwZU1pc21hdGNoOiAnUG9yIGZhdm9yLCBpbnNpcmEgdW0gZW5kZXJlw6dvIHdlYicsXHJcbiAgICAgIHRvb1Nob3J0OiAnQXVtZW50ZSBlc3NlIHRleHRvIHBhcmEgMiBjYXJhY3RlcmVzIG91IG1haXMuJyxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvLyBGdW7Dp8OjbyBxdWUgbW9zdHJhIGVsZW1lbnRvIGRlIGVycm9cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7IFxyXG5cclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdtb2RhbF9faW5wdXRfdHlwZV9lcnJvcicpOyBcclxuXHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7IFxyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ21vZGFsX19pbnB1dC1lcnJvcl9hY3RpdmUnKTsgXHJcbiAgfVxyXG5cclxuICAvLyBGdW7Dp8OjbyBxdWUgb2N1bGRhIGVsZW1lbnRvIGRlIGVycm9cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApOyBcclxuXHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWxfX2lucHV0X3R5cGVfZXJyb3InKTsgXHJcblxyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsX19pbnB1dC1lcnJvcl9hY3RpdmUnKTsgXHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJzsgXHJcbiAgfVxyXG5cclxuICAvLyBGdW7Dp8OjbyB2ZXJpZmljYSBzZSBvIGNhbXBvIMOpIHZhbGlkb1xyXG4gIF9pc1ZhbGlkKGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHsgXHJcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IE9iamVjdC5rZXlzKHRoaXMuZXJyb3JNZXNzYWdlcykuZmluZChlcnJvcktleSA9PiBpbnB1dEVsZW1lbnQudmFsaWRpdHlbZXJyb3JLZXldKTtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UgPyB0aGlzLmVycm9yTWVzc2FnZXNbZXJyb3JNZXNzYWdlXSA6ICdWZXJpZmlxdWUgb3MgY2FtcG9zIGRpZ2l0YWRvcy4nKTtcclxuICAgIH0gZWxzZSB7IFxyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpOyBcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vIEZ1bsOnw6NvIHBhcmEgYXRpdmFyIG8gZGVzYXRpdmFyIG1ldSBib3RhbyBkZXBlbmRlbmRvIGRhIHZhbGRpYWNhbyBkbyBmb3JtdWxhcmlvXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2J1dHRvbl9faW5hY3RpdmUnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdidXR0b25fX2luYWN0aXZlJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyBGdW7Dp8OjbyB2ZXJpZmljYSBzZSB0b2RvcyBvcyBpbnB1dHMgZXN0w6NvIHZhbGlkb3MuIHJldG9ybmEgdHJ1ZSBzZSB1bSBjYW1wbyBmb3IgaW52YWxpZG9cclxuICAvLyBtZSBzaW5hbGl6YXJhIHNlIGZvciB0cnVlIHByYSBib3RhbyBmaWNhciBpbnZhbGlkb1xyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgLy8gTcOpdG9kbyBwYXJhIGFkaWNvbmFyIGVzY3V0YWRvcyBkZSBldmVudG9zIGEgdG9kb3Mgb3MgY2FtcG9zIGRlIGlucHV0XHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgICAvLyBJdGVyYSBzb2JyZSBhcnJheVxyXG4gICAgdGhpcy5pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9pc1ZhbGlkKGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIE3DqXRvZG8gcGFyYSBoYWJpbGl0YXIgdmFsaWRhw6fDo28gZG8gZm9ybXVsw6FyaW9cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KClcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICAvL23DqXRvZG8gcXVlIGZheiBvIGZvcm11bGFyaW8gcmVzZXRhciBzdWEgdmFsaWRhw6fDo29cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLmlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICB9XHJcbn1cclxuXHJcblxyXG4iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXIoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yLCBzdWJtaXRDYWxsYmFjaykge1xyXG4gICAgc3VwZXIoc2VsZWN0b3IpO1xyXG4gICAgdGhpcy5zdWJtaXRDYWxsYmFjayA9IHN1Ym1pdENhbGxiYWNrO1xyXG4gICAgdGhpcy5mb3JtID0gdGhpcy5zZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Zvcm0nKTtcclxuICAgIHRoaXMuY2xvc2VCdXR0b24gPSB0aGlzLnNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fYnV0dG9uLWNsb3NlJyk7XHJcbiAgICB0aGlzLmZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih0aGlzLmZvcm0pO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRMaXN0ID0gdGhpcy5mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RhbF9faW5wdXQnKTtcclxuICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB7fTtcclxuICAgIGlucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcclxuICAgICAgZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZm9ybVZhbHVlcztcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB0aGlzLmZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7IC8vbWV0b2RvIHF1ZSBmYXogY29tIHF1ZSB0b2RhIHZleiBxdWUgYWJyaXIgbyBtb2RhbCBldSByZXNldGFyIGEgdmFsaWRhw6fDo29cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5mb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkXCI7XHJcbmltcG9ydCB7IHRvZ2dsZVBhZ2VPcGFjaXR5IH0gZnJvbSBcIi4uL3V0aWxzL3V0aWxzLmpzXCI7XHJcbmltcG9ydCB7IGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm9cIjtcclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZVwiO1xyXG5pbXBvcnQgeyBpbml0aWFsaXplUGFnZSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvXCI7XHJcbmltcG9ydCB7IEFwaSB9IGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5cclxuLy8gQ2hhbWEgYSBmdW7Dp8OjbyBkZSBpbmljaWFsaXphw6fDo28gZGEgcMOhZ2luYSBxdWFuZG8gYSBww6FnaW5hIGZvciBjYXJyZWdhZGEsIHJlc3BvbnPDoXZlbCBwb3IgY2FycmVnYXIgb3MgZGFkb3MgZG8gcHJvZmlsZSBkbyBzZXJ2aWRvclxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xyXG4gIGluaXRpYWxpemVQYWdlKCk7XHJcbn0pO1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSgpOyBcclxuY29uc3QgaW5pdGlhbENhcmRzID0gW107IC8vIEluaWNpYWxpemEgYSB2YXJpw6F2ZWwgaW5pdGlhbENhcmRzIGNvbW8gdW0gYXJyYXkgdmF6aW8sIHNlcsOhIHByZWVuY2hpZG8gcGVsb3MgZGFkb3MgZGEgQVBJXHJcblxyXG4vLyBGdW7Dp8OjbyBwYXJhIHBlZ2FyIGNhcmRzIGluaWNpYWlzIGRvIHNlcnZpZG9yXHJcbmFwaS5mZXRjaEluaXRpYWxDYXJkcygpXHJcbiAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgaW5pdGlhbENhcmRzLnB1c2goLi4ucmVzKTtcclxuXHJcbiAgICByZXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICBpZiAoaXRlbS5vd25lci5faWQgPT09IFwiNDM2ZTc0YzExNWRmZTAwNjc1MGFjMjA1XCIpIHtcclxuICAgICAgICAvL2NvbG9xdWVpIHRlbXBvIHBhcmEgYXRyYXNhciBhIGV4ZWN1Y2FvIGRhIGZ1bmNhbywgc2VuYW8gbyBjYXJkIG5hbyDDqSByZW5kZXJpemFkbyBubyBtb21lbnRvIGRhIGV4ZWN1Y2FvIGRlc3NhIGZ1bmNhbyBlIGRhIGVycm8uXHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBzaG93RGVsZXRlQnV0dG9uKCksIDEwMCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgY2FyZExpc3QucmVuZGVyKCk7XHJcbiAgfSk7XHJcblxyXG5jb25zb2xlLmxvZyhpbml0aWFsQ2FyZHMpXHJcblxyXG5mdW5jdGlvbiBzaG93RGVsZXRlQnV0dG9uKCkge1xyXG4gIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lbGVtZW50X19kZWxldGUnKVxyXG4gIGRlbGV0ZUJ1dHRvbi5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICBjb25zdCBjYXJkSWQgPSBpdGVtLmRhdGFzZXQuY2FyZElkO1xyXG4gICAgaWYgKGNhcmRJZCA9PT0gXCI0MzZlNzRjMTE1ZGZlMDA2NzUwYWMyMDVcIikge1xyXG4gICAgICBpdGVtLmNsYXNzTGlzdC5hZGQoJ2VsZW1lbnRfX2RlbGV0ZV9hY3RpdmUnKVxyXG4gICAgfVxyXG4gIH0pXHJcbn1cclxuXHJcbmNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uLWVkaXQnKTtcclxuY29uc3QgY2xvc2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2J1dHRvbi1jbG9zZScpO1xyXG5leHBvcnQgY29uc3QgcGFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wYWdlJyk7XHJcbmNvbnN0IG9wZW5Nb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcubW9kYWwnLCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7XHJcbmNvbnN0IG9wZW5Nb2RhbEFkZCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcubW9kYWwtYWRkJywgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQpO1xyXG5jb25zdCBvcGVuTW9kYWxJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLm1vZGFsLWltYWdlJyk7XHJcbmNvbnN0IG1vZGFsRGVsZXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX2RlbGV0ZScpXHJcblxyXG5cclxuZWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICB0b2dnbGVQYWdlT3BhY2l0eShwYWdlKTtcclxuICBvcGVuTW9kYWwub3BlbigpO1xyXG59KTtcclxuXHJcbmNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIHRvZ2dsZVBhZ2VPcGFjaXR5KHBhZ2UpO1xyXG4gIG9wZW5Nb2RhbC5jbG9zZSgpO1xyXG59KTtcclxuXHJcbmNvbnN0IGFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b24tYWRkJyk7XHJcbmNvbnN0IGJ1dHRvbkNsb3NlQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbi1jbG9zZScpO1xyXG5cclxuYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIHRvZ2dsZVBhZ2VPcGFjaXR5KHBhZ2UpO1xyXG4gIG9wZW5Nb2RhbEFkZC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuYnV0dG9uQ2xvc2VBZGQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgdG9nZ2xlUGFnZU9wYWNpdHkocGFnZSk7XHJcbiAgb3Blbk1vZGFsQWRkLmNsb3NlKCk7XHJcbn0pO1xyXG5cclxuY29uc3QgZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Zvcm0nKTtcclxuXHJcbmZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdChldnQpO1xyXG4gIG9wZW5Nb2RhbC5jbG9zZSgpO1xyXG4gIHRvZ2dsZVBhZ2VPcGFjaXR5KHBhZ2UpO1xyXG59KTtcclxuXHJcbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcclxuICAgIHJlbmRlcmVyOiBpdGVtID0+IHtcclxuICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGl0ZW0ubGluaywgaXRlbS5uYW1lLCBpdGVtLm93bmVyLCBpdGVtLl9pZCwgaXRlbS5saWtlcy5sZW5ndGgpO1xyXG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgICAgIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgJy5lbGVtZW50cydcclxuKTtcclxuXHJcbmNvbnN0IG1vZGFsRm9ybUFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1hZGQnKTtcclxuY29uc3QgZm9ybUFkZEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19mb3JtX2FkZCcpO1xyXG5cclxubW9kYWxGb3JtQWRkLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICBjb25zdCBpbWFnZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2lucHV0X3RpdGxlJyk7XHJcbiAgY29uc3QgaW1hZ2VMaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19pbnB1dF9saW5rJyk7XHJcbiAgY29uc3Qgb3duZXJJZCA9IFwiNDM2ZTc0YzExNWRmZTAwNjc1MGFjMjA1XCI7IC8vIElEIGRvIHVzdcOhcmlvIGF0dWFsLCBzdWJzdGl0dWEgcGVsbyB2YWxvciBjb3JyZXRvIHJlY3VwZXJhZG8gZGEgQVBJXHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGltYWdlTGluay52YWx1ZSwgaW1hZ2VOYW1lLnZhbHVlLCB7IF9pZDogb3duZXJJZCB9KTtcclxuICBjYXJkLmFkZENhcmRUb1NlcnZlcigpO1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHMnKS5wcmVwZW5kKGNhcmRFbGVtZW50KTtcclxuICBvcGVuTW9kYWxBZGQuY2xvc2UoKTtcclxuICB0b2dnbGVQYWdlT3BhY2l0eShwYWdlKTtcclxuICBmb3JtQWRkSW1hZ2UucmVzZXQoKTtcclxufSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2dCkgPT4ge1xyXG4gIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICBvcGVuTW9kYWwuX2hhbmRsZUVzY0Nsb3NlKCk7XHJcbiAgICBvcGVuTW9kYWxBZGQuX2hhbmRsZUVzY0Nsb3NlKCk7XHJcbiAgICBvcGVuTW9kYWxJbWFnZS5jbG9zZSgpO1xyXG4gIH1cclxufSk7XHJcblxyXG5wYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoZXZ0KSA9PiB7XHJcbiAgb3Blbk1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgb3Blbk1vZGFsQWRkLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgb3Blbk1vZGFsSW1hZ2UuY2xvc2UoKTtcclxufSk7XHJcblxyXG5jb25zdCByZW1vdmVFdmVudExpc3RlbmVycyA9ICgpID0+IHtcclxuICBlZGl0QnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgdG9nZ2xlUGFnZU9wYWNpdHkocGFnZSk7XHJcbiAgICBvcGVuTW9kYWwub3BlbigpO1xyXG4gIH0pO1xyXG5cclxuICBjbG9zZUJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIHRvZ2dsZVBhZ2VPcGFjaXR5KHBhZ2UpO1xyXG4gICAgb3Blbk1vZGFsLmNsb3NlKCk7XHJcbiAgfSk7XHJcblxyXG4gIGFkZEJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIHRvZ2dsZVBhZ2VPcGFjaXR5KHBhZ2UpO1xyXG4gICAgb3Blbk1vZGFsQWRkLm9wZW4oKTtcclxuICB9KTtcclxuXHJcbiAgYnV0dG9uQ2xvc2VBZGQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICB0b2dnbGVQYWdlT3BhY2l0eShwYWdlKTtcclxuICAgIG9wZW5Nb2RhbEFkZC5jbG9zZSgpO1xyXG4gIH0pO1xyXG5cclxuICBmb3JtRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdChldnQpO1xyXG4gICAgb3Blbk1vZGFsLmNsb3NlKCk7XHJcbiAgICB0b2dnbGVQYWdlT3BhY2l0eShwYWdlKTtcclxuICB9KTtcclxuXHJcbiAgbW9kYWxGb3JtQWRkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgY29uc3QgaW1hZ2VOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19pbnB1dF90aXRsZScpO1xyXG4gICAgY29uc3QgaW1hZ2VMaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19pbnB1dF9saW5rJyk7XHJcbiAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoaW1hZ2VMaW5rLnZhbHVlLCBpbWFnZU5hbWUudmFsdWUpO1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzJykucHJlcGVuZChjYXJkRWxlbWVudCk7XHJcbiAgICBvcGVuTW9kYWxBZGQuY2xvc2UoKTtcclxuICAgIHRvZ2dsZVBhZ2VPcGFjaXR5KHBhZ2UpO1xyXG4gICAgZm9ybUFkZEltYWdlLnJlc2V0KCk7XHJcbiAgfSk7XHJcblxyXG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICBvcGVuTW9kYWwuX2hhbmRsZUVzY0Nsb3NlKCk7XHJcbiAgICAgIG9wZW5Nb2RhbEFkZC5faGFuZGxlRXNjQ2xvc2UoKTtcclxuICAgICAgb3Blbk1vZGFsSW1hZ2UuY2xvc2UoKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgcGFnZS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgKGV2dCkgPT4ge1xyXG4gICAgb3Blbk1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICBvcGVuTW9kYWxBZGQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIG9wZW5Nb2RhbEltYWdlLmNsb3NlKCk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5yZW1vdmVFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8gSW5zdGFuY2lhIGEgY2xhc3NlIEZvcm1WYWxpZGF0b3IgcGFyYSBjYWRhIGZvcm11bMOhcmlvIGVuY29udHJhZG8gbmEgcMOhZ2luYVxyXG5jb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1vZGFsX19mb3JtJykpO1xyXG5cclxuZm9ybUxpc3QuZm9yRWFjaCgoZm9ybSkgPT4ge1xyXG4gIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGZvcm0pO1xyXG4gIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxuLy9hYnJpciBtb2RhbCBwYXJhIGVkaXRhciBwaG90byBkbyBwZXJmaWxcclxuY29uc3Qgc2hvd01vZGFsRWRpdFBob3RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2ltYWdlX292ZXJsYXknKVxyXG5jb25zdCBzaG93TW9kYWxFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX3Bob3RvJyk7XHJcbnNob3dNb2RhbEVkaXRQaG90by5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtjb25zdCBzaG93TW9kYWxFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX3Bob3RvJyk7XHJcbiAgc2hvd01vZGFsRWRpdC5jbGFzc0xpc3QuYWRkKCdtb2RhbC1waG90bycpXHJcbiAgcGFnZS5jbGFzc0xpc3QuYWRkKCdwYWdlX29wYWNpdHknKTtcclxufSk7XHJcblxyXG4vL2ZlY2hhciBtb2RhbCBkZSBlZGl0YXIgcGhvdG8gZG8gcGVyZmlsXHJcbmNvbnN0IGNsb3NlTW9kYWxQaG90byA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b24tY2xvc2UtcGhvdG8nKTtcclxuY2xvc2VNb2RhbFBob3RvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIHNob3dNb2RhbEVkaXQuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWwtcGhvdG8nKTtcclxuICBwYWdlLmNsYXNzTGlzdC5yZW1vdmUoJ3BhZ2Vfb3BhY2l0eScpO1xyXG59KVxyXG5cclxuLy9tdWRhIGZvdG8gZG8gcGVyZmlsIG5hIEFQSVxyXG5jb25zdCBwcm9maWxlUGhvdG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9faW1hZ2UnKTtcclxuY29uc3QgYnV0dG9uU2F2ZXBob3RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19idXR0b25fc2F2ZScpO1xyXG5jb25zdCBpbnB1dFNhdmVQaG90b0ZpZWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19pbnB1dF9zYXZlLXBob3RvJylcclxuY29uc3QgbW9kYWxfX2Zvcm1fZWRpdFBob3RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19mb3JtX2VkaXRQaG90bycpXHJcbmJ1dHRvblNhdmVwaG90by5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBhcGkudXBkYXRlUHJvZmlsZVBpY3R1cmUoaW5wdXRTYXZlUGhvdG9GaWVsZC52YWx1ZSk7XHJcbiAgcHJvZmlsZVBob3RvLnNyYyA9IGlucHV0U2F2ZVBob3RvRmllbGQudmFsdWU7XHJcbiAgc2hvd01vZGFsRWRpdC5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbC1waG90bycpXHJcbiAgcGFnZS5jbGFzc0xpc3QucmVtb3ZlKCdwYWdlX29wYWNpdHknKTtcclxuICBtb2RhbF9fZm9ybV9lZGl0UGhvdG8ucmVzZXQoKTtcclxufSlcclxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiQXBpIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsImF1dGhvcml6YXRpb24iLCJiYXNlVXJsIiwidmFsdWUiLCJmZXRjaCIsImNvbmNhdCIsImhlYWRlcnMiLCJ0aGVuIiwicmVzIiwianNvbiIsImNhdGNoIiwiZXJyb3IiLCJjb25zb2xlIiwiaW1hZ2VVcmwiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImF2YXRhciIsInVwZGF0ZWRSZXN1bHQiLCJkYXRhIiwicmVzcG9uc2UiLCJjYXJkRGF0YSIsImNyZWF0ZWRDYXJkIiwiY2FyZElkIiwiUG9wdXAiLCJzZWxlY3RvciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsImNsb3NlIiwicGFnZSIsIlBvcHVwV2l0aEltYWdlIiwiX1BvcHVwIiwiX2luaGVyaXRzIiwiX3N1cGVyIiwiYXBpIiwibW9kYWxJbWFnZSIsIm1vZGFsSW1nRWxlbWVudCIsImJ0bkNsb3NlIiwibW9kYWxUaXRsZSIsInBvcHVwV2l0aEltYWdlIiwibW9kYWxEZWxldGUiLCJjbG9zZUJ1dHRvbiIsImNvbmZpcm1CdXR0b24iLCJDYXJkIiwiaW1hZ2VMaW5rIiwiaW1hZ2VUaXRsZSIsIm93bmVyIiwiaWRDYXJkIiwibnVtYmVyT2ZMaWtlcyIsIl90aGlzIiwiX2VsZW1lbnQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2hhbmRsZURlbGV0ZSIsIl9pbWFnZUxpbmsiLCJfaW1hZ2VUaXRsZSIsIl9nZXRUZW1wbGF0ZSIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9vd25lciIsIl9pZCIsIl9saWtlc0NvdW50IiwiX2lzTGlrZWQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwic3JjVmFsIiwiZ2V0QXR0cmlidXRlIiwic2V0QXR0cmlidXRlIiwiaW1nQWx0IiwidGV4dENvbnRlbnQiLCJvcGVuIiwiX3RoaXMyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsInRhcmdldCIsInRvZ2dsZSIsImNvbnRhaW5zIiwiYWRkTGlrZSIsInJlbW92ZUxpa2UiLCJkZWxldGVDYXJkRnJvbVNlcnZlciIsImhhbmRsZUNsaWNrIiwiYmluZCIsImFsdCIsInNyYyIsImRhdGFzZXQiLCJuYW1lIiwibGluayIsImFkZENhcmQiLCJsb2ciLCJfdGhpczMiLCJkZWxldGVDYXJkIiwib2siLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwiX3RoaXM0IiwiYWRkTGlrZVRvQ2FyZCIsImxpa2VzIiwibGVuZ3RoIiwiX3RoaXM1IiwicmVtb3ZlTGlrZUZyb21DYXJkIiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJwcm9maWxlUGhvdG9JbnB1dCIsIm5hbWVGaWVsZCIsImpvYkZpZWxkIiwicHJvZmlsZVBob3RvRmllbGQiLCJ0b2dnbGVQYWdlT3BhY2l0eSIsIlVzZXJJbmZvIiwiam9iIiwicGhvdG8iLCJ1cGRhdGVQcm9maWxlIiwiZ2V0UHJvZmlsZSIsImFib3V0Iiwic2V0VXNlckluZm8iLCJoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCIsInByZXZlbnREZWZhdWx0IiwidXNlckluZm8iLCJ1c2VySW5mb0RhdGEiLCJnZXRVc2VySW5mbyIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtIiwiaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImJ1dHRvbkVsZW1lbnQiLCJlcnJvck1lc3NhZ2VzIiwidmFsdWVNaXNzaW5nIiwidHlwZU1pc21hdGNoIiwidG9vU2hvcnQiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJrZXlzIiwiZmluZCIsImVycm9yS2V5IiwiX3Nob3dJbnB1dEVycm9yIiwiX2hhc0ludmFsaWRJbnB1dCIsInNvbWUiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiX2lzVmFsaWQiLCJTZWN0aW9uIiwiX3JlZiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJQb3B1cFdpdGhGb3JtIiwic3VibWl0Q2FsbGJhY2siLCJmb3JtVmFsaWRhdG9yIiwiZm9ybVZhbHVlcyIsImlucHV0IiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInJlc2V0VmFsaWRhdGlvbiIsInJlc2V0Iiwid2luZG93IiwiaW5pdGlhbGl6ZVBhZ2UiLCJpbml0aWFsQ2FyZHMiLCJmZXRjaEluaXRpYWxDYXJkcyIsInB1c2giLCJhcHBseSIsInNldFRpbWVvdXQiLCJjYXJkTGlzdCIsInJlbmRlciIsImVkaXRCdXR0b24iLCJvcGVuTW9kYWwiLCJvcGVuTW9kYWxBZGQiLCJvcGVuTW9kYWxJbWFnZSIsImFkZEJ1dHRvbiIsImJ1dHRvbkNsb3NlQWRkIiwiZm9ybUVsZW1lbnQiLCJjYXJkRWxlbWVudCIsImdlbmVyYXRlQ2FyZCIsImFkZEl0ZW0iLCJtb2RhbEZvcm1BZGQiLCJmb3JtQWRkSW1hZ2UiLCJpbWFnZU5hbWUiLCJjYXJkIiwiYWRkQ2FyZFRvU2VydmVyIiwiX2hhbmRsZUVzY0Nsb3NlIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJlbmFibGVWYWxpZGF0aW9uIiwic2hvd01vZGFsRWRpdFBob3RvIiwic2hvd01vZGFsRWRpdCIsInByb2ZpbGVQaG90byIsImJ1dHRvblNhdmVwaG90byIsImlucHV0U2F2ZVBob3RvRmllbGQiLCJtb2RhbF9fZm9ybV9lZGl0UGhvdG8iLCJ1cGRhdGVQcm9maWxlUGljdHVyZSJdLCJzb3VyY2VSb290IjoiIn0=
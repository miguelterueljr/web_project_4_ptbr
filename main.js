!function(){"use strict";var e={d:function(t,n){for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}};e.d({},{Z0:function(){return _e},f1:function(){return ge},DV:function(){return ke},vL:function(){return Se},ck:function(){return he}});var t=document.querySelector(".modal__input_name"),n=document.querySelector(".modal__input_job"),o=(document.querySelector(".modal__input_save-photo"),document.querySelector(".profile__name")),r=document.querySelector(".profile__about"),i=document.querySelector(".profile__image");function a(e){e.classList.toggle("page_opacity")}var c="436e74c115dfe006750ac205",u=document.querySelector(".page");function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==l(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===l(r)?r:String(r)),o)}var r}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.selector=document.querySelector(t)}var t,n;return t=e,(n=[{key:"open",value:function(){this.selector.classList.add("modal-opened")}},{key:"close",value:function(){this.selector.classList.remove("modal-opened")}},{key:"_handleEscClose",value:function(){this.close(),u.classList.remove("page_opacity")}},{key:"setEventListeners",value:function(){this.close(),u.classList.remove("page_opacity")}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function m(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==d(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==d(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===d(r)?r:String(r)),o)}var r}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}(a,e);var t,n,o,r,i=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(o);if(r){var n=p(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"open",value:function(){this.selector.classList.add("modal-image__active")}},{key:"close",value:function(){this.selector.classList.remove("modal-image__active")}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(f);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function b(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_(o.key),o)}}function _(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==h(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===h(t)?t:String(t)}var g=document.querySelector(".modal-image"),S=document.querySelector(".modal-image__image"),k=document.querySelector(".modal-image__button"),E=document.querySelector(".modal-image__title"),w=document.querySelector(".page"),L=new v(".modal-image"),j=document.querySelector(".modal-delete"),C=document.querySelector(".modal__button-close_close"),P=document.querySelector(".modal__button_confirm"),q=function(){function e(t,n,o,r,i){var a,c,u,l=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a=this,u=function(){l._element.remove(),j.classList.remove("modal_delete"),w.classList.remove("page_opacity"),P.removeEventListener("click",l._handleDelete)},(c=_(c="_handleDelete"))in a?Object.defineProperty(a,c,{value:u,enumerable:!0,configurable:!0,writable:!0}):a[c]=u,this._imageLink=t,this._imageTitle=n,this._element=this._getTemplate(),this._setEventListeners(),this._owner=o,this._id=r,this._likesCount=i,this._isLiked=!1}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(".card-template").content.querySelector(".element").cloneNode(!0)}},{key:"handleClick",value:function(){var e=this._element.querySelector(".element__image").getAttribute("src");S.setAttribute("src",e);var t=this._element.querySelector(".element__image").getAttribute("alt");S.setAttribute("alt",t);var n=this._element.querySelector(".element__title").textContent;E.textContent=n,L.open(),w.classList.add("page_opacity")}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".element__button_image").addEventListener("click",(function(t){t.target.classList.toggle("element__button_active"),t.target.classList.contains("element__button_active")?e.addLike():e.removeLike()})),this._element.querySelector(".element__delete").addEventListener("click",(function(){j.classList.add("modal_delete"),w.classList.add("page_opacity"),P.addEventListener("click",(function(){e._handleDelete(),e.deleteCardFromServer()}))})),this._element.querySelector(".element__image").addEventListener("click",this.handleClick.bind(this)),k.addEventListener("click",(function(){g.classList.remove("modal-image__active"),w.classList.remove("page_opacity")})),C.addEventListener("click",(function(){j.classList.remove("modal_delete"),w.classList.remove("page_opacity"),P.removeEventListener("click",e._handleDelete)}))}},{key:"generateCard",value:function(){return this._element.querySelector(".element__image").alt="Card contendo a foto e o titulo de ".concat(this._imageTitle),this._element.querySelector(".element__image").src=this._imageLink,this._element.querySelector(".element__title").textContent=this._imageTitle,this._element.querySelector(".element__delete").dataset.cardId=this._owner._id,this._element.querySelector(".element__delete").dataset.idCard=this._id,this._element.querySelector(".element__number").textContent=this._likesCount,this._element}},{key:"addCardToServer",value:function(){_e({name:this._imageTitle,link:this._imageLink})}},{key:"deleteCardFromServer",value:function(){ge(this._element.querySelector(".element__delete").dataset.idCard)}},{key:"addLike",value:function(){Se(this._id),this._likesCount++,this._updateLikesCount()}},{key:"removeLike",value:function(){ke(this._id),this._likesCount--,this._updateLikesCount()}},{key:"_updateLikesCount",value:function(){this._element.querySelector(".element__number").textContent=this._likesCount}}])&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function T(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==O(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==O(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===O(r)?r:String(r)),o)}var r}var I=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.authorization="85c06b76-d1bb-40cc-b9fa-fda6b61002da",this.baseUrl="https://around.nomoreparties.co/v1/web_ptbr_04"}var t,n;return t=e,(n=[{key:"fetchInitialCards",value:function(){return fetch("".concat(this.baseUrl,"/cards"),{headers:{authorization:this.authorization}}).then((function(e){return e.json()})).catch((function(e){return console.error("Erro ao buscar os cards iniciais:",e),[]}))}},{key:"updateProfilePicture",value:function(e){return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this.authorization,"Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then((function(e){return e.json()})).catch((function(e){throw console.error("Erro ao atualizar o avatar:",e),e}))}},{key:"updateProfile",value:function(e){return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:{authorization:this.authorization,"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){throw console.error("Erro ao atualizar o perfil:",e),e}))}},{key:"getProfile",value:function(){return fetch("".concat(this.baseUrl,"/users/me"),{headers:{authorization:this.authorization}}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){throw console.error("Erro ao carregar as informações do perfil:",e),e}))}},{key:"addCard",value:function(e){return fetch("".concat(this.baseUrl,"/cards"),{method:"POST",headers:{authorization:this.authorization,"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){throw console.error("Erro ao adicionar o card:",e),e}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this.authorization}}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){throw console.error("Erro ao excluir o card:",e),e}))}},{key:"addLikeToCard",value:function(e){return fetch("".concat(this.baseUrl,"/cards/").concat(e,"/likes"),{method:"PUT",headers:{authorization:this.authorization}}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){throw console.error("Erro ao adicionar curtida ao card:",e),e}))}},{key:"removeLikeFromCard",value:function(e){return fetch("".concat(this.baseUrl,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:{authorization:this.authorization}}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){throw console.error("Erro ao remover curtida do card:",e),e}))}}])&&T(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function A(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==z(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==z(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===z(r)?r:String(r)),o)}var r}var x=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=new I}var a,c;return a=e,(c=[{key:"getUserInfo",value:function(){return{name:t.value,job:n.value}}},{key:"setUserInfo",value:function(e,t,n){o.textContent=e,r.textContent=t,i.src=n}}])&&A(a.prototype,c),Object.defineProperty(a,"prototype",{writable:!1}),e}();function U(e){e.preventDefault();var t=new x,n=t.getUserInfo();t.setUserInfo(n.name,n.job,n.photo),he({name:n.name,about:n.job})}function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function R(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==D(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==D(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===D(r)?r:String(r)),o)}var r}var V=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.form=t,this.inputList=Array.from(t.querySelectorAll(".modal__input")),this.buttonElement=t.querySelector(".modal__button"),this.errorMessages={valueMissing:"Campo é obrigatório.",typeMismatch:"Por favor, insira um endereço web",tooShort:"Aumente esse texto para 2 caracteres ou mais."}}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e,t){var n=e.nextElementSibling;e.classList.add("modal__input_type_error"),n.textContent=t,n.classList.add("modal__input-error_active")}},{key:"_hideInputError",value:function(e){var t=e.nextElementSibling;e.classList.remove("modal__input_type_error"),t.classList.remove("modal__input-error_active"),t.textContent=""}},{key:"_isValid",value:function(e){if(e.validity.valid)this._hideInputError(e);else{var t=Object.keys(this.errorMessages).find((function(t){return e.validity[t]}));this._showInputError(e,t?this.errorMessages[t]:"Verifique os campos digitados.")}}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this.buttonElement.classList.add("button__inactive"),this.buttonElement.disabled=!0):(this.buttonElement.classList.remove("button__inactive"),this.buttonElement.disabled=!1)}},{key:"_hasInvalidInput",value:function(){return this.inputList.some((function(e){return!e.validity.valid}))}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(),this.inputList.forEach((function(t){t.addEventListener("input",(function(){e._isValid(t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this.form.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}},{key:"resetValidation",value:function(){var e=this;this.inputList.forEach((function(t){e._hideInputError(t)})),this._toggleButtonState()}}])&&R(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function F(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==B(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==B(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===B(r)?r:String(r)),o)}var r}var M=function(){function e(t,n){var o=t.items,r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=o,this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"render",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&F(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function J(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==N(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==N(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===N(r)?r:String(r)),o)}var r}function H(){return H="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},H.apply(this,arguments)}function Z(e,t){return Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Z(e,t)}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}var G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z(e,t)}(a,e);var t,n,o,r,i=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$(o);if(r){var n=$(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e)).submitCallback=t,n.form=n.selector.querySelector(".modal__form"),n.closeButton=n.selector.querySelector(".modal__button-close"),n.formValidator=new V(n.form),n}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this.form.querySelectorAll(".modal__input"),t={};return e.forEach((function(e){t[e.name]=e.value})),t}},{key:"open",value:function(){H($(a.prototype),"open",this).call(this),this.formValidator.resetValidation()}},{key:"setEventListeners",value:function(){var e=this;H($(a.prototype),"setEventListeners",this).call(this),this.closeButton.addEventListener("click",(function(){e.close()}))}},{key:"close",value:function(){H($(a.prototype),"close",this).call(this),this.form.reset()}}])&&J(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(f);function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var Q=new x;window.addEventListener("DOMContentLoaded",(function(){W.getProfile().then((function(e){var t=e.name,n=e.about,o=e.avatar;Q.setUserInfo(t,n,o)})).catch((function(e){console.error("Erro ao carregar as informações do perfil:",e)}))}));var W=new I,X=[];function Y(){document.querySelectorAll(".element__delete").forEach((function(e){e.dataset.cardId===c&&e.classList.add("element__delete_active")}))}W.fetchInitialCards().then((function(e){var t;X.push.apply(X,function(e){if(Array.isArray(e))return K(e)}(t=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),e.forEach((function(e){e.owner._id===c&&setTimeout((function(){return Y()}),100)})),ue.render()}));var ee=document.querySelector(".button-edit"),te=document.querySelector(".modal__button-close"),ne=new G(".modal",U),oe=new G(".modal-add",U),re=new v(".modal-image");ee.addEventListener("click",(function(){a(u),ne.open()})),te.addEventListener("click",(function(){a(u),ne.close()}));var ie=document.querySelector(".button-add"),ae=document.querySelector(".button-close");ie.addEventListener("click",(function(){a(u),oe.open()})),ae.addEventListener("click",(function(){a(u),oe.close()}));var ce=document.querySelector(".modal__form");ce.addEventListener("submit",(function(e){U(e),ne.close(),a(u)}));var ue=new M({items:X,renderer:function(e){var t=new q(e.link,e.name,e.owner,e._id,e.likes.length).generateCard();ue.addItem(t)}},".elements"),le=document.querySelector(".modal-add"),se=document.querySelector(".modal__form_add");le.addEventListener("submit",(function(e){e.preventDefault();var t=document.querySelector(".modal__input_title"),n=document.querySelector(".modal__input_link"),o=new q(n.value,t.value,{_id:c});o.addCardToServer();var r=o.generateCard();document.querySelector(".elements").prepend(r),oe.close(),a(u),se.reset()})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&(ne._handleEscClose(),oe._handleEscClose(),re.close())})),u.addEventListener("mouseup",(function(e){ne.setEventListeners(),oe.setEventListeners(),re.close()})),ee.removeEventListener("click",(function(){a(u),ne.open()})),te.removeEventListener("click",(function(){a(u),ne.close()})),ie.removeEventListener("click",(function(){a(u),oe.open()})),ae.removeEventListener("click",(function(){a(u),oe.close()})),ce.removeEventListener("submit",(function(e){U(e),ne.close(),a(u)})),le.removeEventListener("submit",(function(e){e.preventDefault();var t=new q(imageLink.value,imageName.value).generateCard();document.querySelector(".elements").prepend(t),oe.close(),a(u)})),document.removeEventListener("keydown",(function(e){"Escape"===e.key&&(ne._handleEscClose(),oe._handleEscClose(),re.close())})),u.removeEventListener("mouseup",(function(e){ne.setEventListeners(),oe.setEventListeners(),re.close()})),Array.from(document.querySelectorAll(".modal__form")).forEach((function(e){new V(e).enableValidation()}));var fe=document.querySelector(".profile__image-overlay"),de=document.querySelector(".modal_photo");fe.addEventListener("click",(function(){document.querySelector(".modal_photo").classList.add("modal-photo"),u.classList.add("page_opacity")})),document.querySelector(".button-close-photo").addEventListener("click",(function(){de.classList.remove("modal-photo"),u.classList.remove("page_opacity")}));var me=document.querySelector(".profile__image"),ye=document.querySelector(".modal__button_save"),pe=document.querySelector(".modal__input_save-photo"),ve=document.querySelector(".modal__form_editPhoto");function he(e){W.updateProfile(e).then((function(e){console.log("Dados de perfil atualizados:",e),Q.setUserInfo(e.name,e.about,e.avatar)})).catch((function(e){console.error("Erro ao atualizar o perfil:",e)}))}ye.addEventListener("click",(function(){W.updateProfilePicture(pe.value),me.src=pe.value,de.classList.remove("modal-photo"),u.classList.remove("page_opacity"),ve.reset()}));var be=new q;function _e(e){W.addCard(e).then((function(e){console.log("Card added to server:",e),be._id=e.id,be._likesCount=e.likes.length,be._element.querySelector(".element__number").textContent=be._likesCount,Y()})).catch((function(e){console.error("Failed to add card to server:",e)}))}function ge(e){W.deleteCard(e).then((function(e){e.ok?(console.log("Card deleted from server."),be._element.remove()):console.error("Failed to delete card from server:",e.status,e.statusText)})).catch((function(e){console.error("Failed to delete card from server:",e)}))}function Se(e){W.addLikeToCard(e).then((function(e){be._likesCount=e.likes.length,be._updateLikesCount()})).catch((function(e){console.error("Falha ao curtir card: ",e)}))}function ke(e){W.removeLikeFromCard(e).then((function(e){be._likesCount=e.likes.length,be._updateLikesCount(),console.log(be._likesCount)})).catch((function(e){console.error("Failed to remove like from card:",e)}))}}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0FDOUJNLEdBQUs3RyxvQkFDTFksUUFBUTZHLElBQUlaLEdBQUszSSxZQUNuQixJQUNDd0MsT0FBTSxTQUFDQyxHQUNOQyxRQUFRRCxNQUFNLG1DQUFvQ0EsRUFDcEQsR0FDSixDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9wdGJyL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfcHRici93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9wdGJyL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9wdGJyLy4vc3JjL3V0aWxzL3V0aWxzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfcHRici8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfcHRici8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfcHRici8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9wdGJyLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfcHRici8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfcHRici8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9wdGJyLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X3B0YnIvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfcHRici8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgZGVmaW5pdGlvbikge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmosIHByb3ApIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApOyB9IiwiLyp2YXJpYXZlaXMgYWJhaXhvIGV1IHBlZ28gb3MgcmVzcGVjdGl2b3MgaW5wdXRzIGRvIGZvcm11bMOhcmlvKi9cclxuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9faW5wdXRfbmFtZScpO1xyXG5leHBvcnQgY29uc3Qgam9iSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2lucHV0X2pvYicpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZVBob3RvSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2lucHV0X3NhdmUtcGhvdG8nKTtcclxuXHJcbi8qdmFyaWF2ZWlzIHF1ZSBwZWdhbSBvcyBsb2NhaXMgZG8gaHRtbCBhb25kZSBzZXJhbyBzYWx2b3Mgb3MgZGFkb3MgZG8gZWRpdCBwcm9maWxlKi9cclxuZXhwb3J0IGNvbnN0IG5hbWVGaWVsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19uYW1lJyk7XHJcbmV4cG9ydCBjb25zdCBqb2JGaWVsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hYm91dCcpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZVBob3RvRmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9faW1hZ2UnKTtcclxuXHJcbi8vRnVuw6fDo28gcGFyYSBmYXplciBhIHBhZ2luYSBmaWNhciBvcGFjYSBxdWFuZG8gbyBtb2RhbCBmb3IgYWJlcnRvLlxyXG5leHBvcnQgZnVuY3Rpb24gdG9nZ2xlUGFnZU9wYWNpdHkgKHBhZ2UpIHtcclxuICBwYWdlLmNsYXNzTGlzdC50b2dnbGUoJ3BhZ2Vfb3BhY2l0eScpO1xyXG59XHJcblxyXG4vL3ZhcmlhdmVpcyBwYXJhIHVzbyBuYSBBcGlcclxuZXhwb3J0IGNvbnN0IGF1dGhvcml6YXRpb25Db2RlID0gXCI4NWMwNmI3Ni1kMWJiLTQwY2MtYjlmYS1mZGE2YjYxMDAyZGFcIjtcclxuZXhwb3J0IGNvbnN0IHVybEFwaSA9IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS93ZWJfcHRicl8wNFwiO1xyXG5leHBvcnQgY29uc3QgbXlVc2VySWQgPSBcIjQzNmU3NGMxMTVkZmUwMDY3NTBhYzIwNVwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IHBhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFnZScpOyIsImltcG9ydCB7IHBhZ2UgfSBmcm9tIFwiLi4vdXRpbHMvdXRpbHMuanNcIjtcclxuXHJcbi8vY2xhc3NlIHJlc3BvbnNhdmVsIHBhcmEgZmF6ZXIgYWJyaXIgb3MgbW9kYWlzXHJcbmV4cG9ydCBjbGFzcyBQb3B1cCB7XHJcbiAgLy91bSBwYXJhbWV0cm8gcXVlIMOpIG8gc2VsZXRvciBjc3NcclxuICBjb25zdHJ1Y3RvcihzZWxlY3Rvcikge1xyXG4gICAgdGhpcy5zZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuc2VsZWN0b3IuY2xhc3NMaXN0LmFkZCgnbW9kYWwtb3BlbmVkJyk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSAoKSB7XHJcbiAgICB0aGlzLnNlbGVjdG9yLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLW9wZW5lZCcpO1xyXG4gIH1cclxuXHJcbiAgLy9mZWNoYSBtb2RhbCBxbmQgYXBlcnRvIGVzY1xyXG4gIF9oYW5kbGVFc2NDbG9zZSAoKSB7XHJcbiAgICB0aGlzLmNsb3NlKClcclxuICAgIHBhZ2UuY2xhc3NMaXN0LnJlbW92ZSgncGFnZV9vcGFjaXR5Jyk7XHJcbiAgfVxyXG5cclxuICAvL2ZlY2hhIG8gbW9kYWwgcXVhbmRvIGNsaWNhciBmb3JhIGRlbGVcclxuICBzZXRFdmVudExpc3RlbmVycyAoKSB7XHJcbiAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICBwYWdlLmNsYXNzTGlzdC5yZW1vdmUoJ3BhZ2Vfb3BhY2l0eScpO1xyXG4gIH1cclxufSIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3RvcihzZWxlY3Rvcikge1xyXG4gICAgc3VwZXIoc2VsZWN0b3IpO1xyXG4gIH1cclxuICAvL2FsdGVyZWkgbyBtZXRvZG8gb3BlbiBkbyBwYWkgcGFyYSBhcGVuYXMgc3Vic3RpdHVpciBhIGNsYXNzZVxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLnNlbGVjdG9yLmNsYXNzTGlzdC5hZGQoJ21vZGFsLWltYWdlX19hY3RpdmUnKTsgIFxyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLnNlbGVjdG9yLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLWltYWdlX19hY3RpdmUnKTtcclxuICB9XHJcblxyXG59XHJcblxyXG4iLCJpbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gXCIuL1BvcHVwV2l0aEltYWdlXCI7XHJcbmltcG9ydCB7IGFkZENhcmQsIGRlbGV0ZUNhcmQsIGxpa2UsIGRpc2xpa2UgfSBmcm9tIFwiLi4vcGFnZXMvaW5kZXguanNcIjtcclxuXHJcbmNvbnN0IG1vZGFsSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtaW1hZ2UnKTtcclxuY29uc3QgbW9kYWxJbWdFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWltYWdlX19pbWFnZScpO1xyXG5jb25zdCBidG5DbG9zZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC1pbWFnZV9fYnV0dG9uJyk7XHJcbmNvbnN0IG1vZGFsVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtaW1hZ2VfX3RpdGxlJyk7XHJcbmNvbnN0IHBhZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGFnZScpO1xyXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLm1vZGFsLWltYWdlJyk7XHJcbmNvbnN0IG1vZGFsRGVsZXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLWRlbGV0ZScpO1xyXG5jb25zdCBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fYnV0dG9uLWNsb3NlX2Nsb3NlJyk7XHJcbmNvbnN0IGNvbmZpcm1CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2J1dHRvbl9jb25maXJtJyk7XHJcblxyXG5leHBvcnQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoaW1hZ2VMaW5rLCBpbWFnZVRpdGxlLCBvd25lciwgaWRDYXJkLCBudW1iZXJPZkxpa2VzKSB7XHJcbiAgICB0aGlzLl9pbWFnZUxpbmsgPSBpbWFnZUxpbms7XHJcbiAgICB0aGlzLl9pbWFnZVRpdGxlID0gaW1hZ2VUaXRsZTtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX293bmVyID0gb3duZXI7XHJcbiAgICB0aGlzLl9pZCA9IGlkQ2FyZDtcclxuICAgIHRoaXMuX2xpa2VzQ291bnQgPSBudW1iZXJPZkxpa2VzO1xyXG4gICAgdGhpcy5faXNMaWtlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcignLmNhcmQtdGVtcGxhdGUnKVxyXG4gICAgICAuY29udGVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcignLmVsZW1lbnQnKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIGhhbmRsZUNsaWNrKCkge1xyXG4gICAgY29uc3Qgc3JjVmFsID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faW1hZ2UnKS5nZXRBdHRyaWJ1dGUoJ3NyYycpO1xyXG4gICAgbW9kYWxJbWdFbGVtZW50LnNldEF0dHJpYnV0ZSgnc3JjJywgc3JjVmFsKTtcclxuICAgIGNvbnN0IGltZ0FsdCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2ltYWdlJykuZ2V0QXR0cmlidXRlKCdhbHQnKTtcclxuICAgIG1vZGFsSW1nRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FsdCcsIGltZ0FsdCk7XHJcbiAgICBjb25zdCBpbWFnZVRpdGxlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fdGl0bGUnKS50ZXh0Q29udGVudDtcclxuICAgIG1vZGFsVGl0bGUudGV4dENvbnRlbnQgPSBpbWFnZVRpdGxlO1xyXG5cclxuICAgIHBvcHVwV2l0aEltYWdlLm9wZW4oKTtcclxuICAgIHBhZ2UuY2xhc3NMaXN0LmFkZCgncGFnZV9vcGFjaXR5Jyk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19idXR0b25faW1hZ2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdlbGVtZW50X19idXR0b25fYWN0aXZlJyk7XHJcblxyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2VsZW1lbnRfX2J1dHRvbl9hY3RpdmUnKSkge1xyXG4gICAgICAgIHRoaXMuYWRkTGlrZSgpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMucmVtb3ZlTGlrZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19kZWxldGUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgbW9kYWxEZWxldGUuY2xhc3NMaXN0LmFkZCgnbW9kYWxfZGVsZXRlJyk7XHJcbiAgICAgIHBhZ2UuY2xhc3NMaXN0LmFkZCgncGFnZV9vcGFjaXR5Jyk7XHJcbiAgICAgIGNvbmZpcm1CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlKCk7XHJcbiAgICAgICAgdGhpcy5kZWxldGVDYXJkRnJvbVNlcnZlcigpO1xyXG4gICAgICB9KVxyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faW1hZ2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKSk7XHJcblxyXG4gICAgYnRuQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIG1vZGFsSW1hZ2UuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWwtaW1hZ2VfX2FjdGl2ZScpO1xyXG4gICAgICBwYWdlLmNsYXNzTGlzdC5yZW1vdmUoJ3BhZ2Vfb3BhY2l0eScpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIG1vZGFsRGVsZXRlLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsX2RlbGV0ZScpO1xyXG4gICAgICBwYWdlLmNsYXNzTGlzdC5yZW1vdmUoJ3BhZ2Vfb3BhY2l0eScpO1xyXG4gICAgICBjb25maXJtQnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlRGVsZXRlKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZURlbGV0ZSA9ICgpID0+IHtcclxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICBtb2RhbERlbGV0ZS5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbF9kZWxldGUnKTtcclxuICAgIHBhZ2UuY2xhc3NMaXN0LnJlbW92ZSgncGFnZV9vcGFjaXR5Jyk7XHJcbiAgICBjb25maXJtQnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlRGVsZXRlKTtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2ltYWdlJykuYWx0ID0gYENhcmQgY29udGVuZG8gYSBmb3RvIGUgbyB0aXR1bG8gZGUgJHt0aGlzLl9pbWFnZVRpdGxlfWA7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pbWFnZScpLnNyYyA9IHRoaXMuX2ltYWdlTGluaztcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RpdGxlJykudGV4dENvbnRlbnQgPSB0aGlzLl9pbWFnZVRpdGxlO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fZGVsZXRlJykuZGF0YXNldC5jYXJkSWQgPSB0aGlzLl9vd25lci5faWQ7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19kZWxldGUnKS5kYXRhc2V0LmlkQ2FyZCA9IHRoaXMuX2lkO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbnVtYmVyJykudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlc0NvdW50O1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgYWRkQ2FyZFRvU2VydmVyKCkge1xyXG4gICAgY29uc3QgY2FyZERhdGEgPSB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX2ltYWdlVGl0bGUsXHJcbiAgICAgIGxpbms6IHRoaXMuX2ltYWdlTGlua1xyXG4gICAgfTtcclxuICBcclxuICAgIGFkZENhcmQoY2FyZERhdGEpXHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkRnJvbVNlcnZlcigpIHtcclxuICAgIGNvbnN0IGNhcmRJZCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2RlbGV0ZScpLmRhdGFzZXQuaWRDYXJkO1xyXG4gICAgZGVsZXRlQ2FyZChjYXJkSWQpO1xyXG4gIH1cclxuXHJcbiAgYWRkTGlrZSgpIHtcclxuICAgIGxpa2UodGhpcy5faWQpO1xyXG4gICAgdGhpcy5fbGlrZXNDb3VudCsrO1xyXG4gICAgdGhpcy5fdXBkYXRlTGlrZXNDb3VudCgpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlTGlrZSgpIHtcclxuICAgIGRpc2xpa2UodGhpcy5faWQpO1xyXG4gICAgdGhpcy5fbGlrZXNDb3VudC0tO1xyXG4gICAgdGhpcy5fdXBkYXRlTGlrZXNDb3VudCgpO1xyXG4gIH1cclxuICBcclxuICBfdXBkYXRlTGlrZXNDb3VudCgpIHtcclxuICAgIGNvbnN0IGxpa2VzQ291bnRFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbnVtYmVyJyk7XHJcbiAgICBsaWtlc0NvdW50RWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzQ291bnQ7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IGF1dGhvcml6YXRpb25Db2RlLCB1cmxBcGkgfSBmcm9tIFwiLi4vdXRpbHMvdXRpbHNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5hdXRob3JpemF0aW9uID0gYXV0aG9yaXphdGlvbkNvZGU7XHJcbiAgICB0aGlzLmJhc2VVcmwgPSB1cmxBcGk7XHJcbiAgfVxyXG5cclxuICBmZXRjaEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5hdXRob3JpemF0aW9uXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm8gYW8gYnVzY2FyIG9zIGNhcmRzIGluaWNpYWlzOlwiLCBlcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVByb2ZpbGVQaWN0dXJlKGltYWdlVXJsKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5hdXRob3JpemF0aW9uLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IGltYWdlVXJsXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSlcclxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvIGFvIGF0dWFsaXphciBvIGF2YXRhcjpcIiwgZXJyb3IpO1xyXG4gICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVByb2ZpbGUoZGF0YSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5hdXRob3JpemF0aW9uLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpXHJcbiAgICB9KVxyXG4gICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSlcclxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvIGFvIGF0dWFsaXphciBvIHBlcmZpbDpcIiwgZXJyb3IpO1xyXG4gICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldFByb2ZpbGUoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuYXV0aG9yaXphdGlvblxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXHJcbiAgICAgIC50aGVuKGRhdGEgPT4ge1xyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvIGFvIGNhcnJlZ2FyIGFzIGluZm9ybWHDp8O1ZXMgZG8gcGVyZmlsOlwiLCBlcnJvcik7XHJcbiAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkQ2FyZChjYXJkRGF0YSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLmF1dGhvcml6YXRpb24sXHJcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoY2FyZERhdGEpXHJcbiAgICB9KVxyXG4gICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSlcclxuICAgICAgLnRoZW4oKGNyZWF0ZWRDYXJkKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGNyZWF0ZWRDYXJkO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm8gYW8gYWRpY2lvbmFyIG8gY2FyZDpcIiwgZXJyb3IpO1xyXG4gICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuYXV0aG9yaXphdGlvblxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpXHJcbiAgICAgIC50aGVuKGRhdGEgPT4ge1xyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvIGFvIGV4Y2x1aXIgbyBjYXJkOlwiLCBlcnJvcik7XHJcbiAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkTGlrZVRvQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5hdXRob3JpemF0aW9uXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgICAgLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm8gYW8gYWRpY2lvbmFyIGN1cnRpZGEgYW8gY2FyZDpcIiwgZXJyb3IpO1xyXG4gICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlbW92ZUxpa2VGcm9tQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5hdXRob3JpemF0aW9uXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcclxuICAgICAgLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm8gYW8gcmVtb3ZlciBjdXJ0aWRhIGRvIGNhcmQ6XCIsIGVycm9yKTtcclxuICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgfSk7XHJcbiAgfVxyXG4gXHJcbn1cclxuIiwiaW1wb3J0IHsgQXBpIH0gZnJvbSBcIi4vQXBpLmpzXCI7IFxyXG5pbXBvcnQgeyBuYW1lSW5wdXQsIGpvYklucHV0LCBuYW1lRmllbGQsIGpvYkZpZWxkLCBwcm9maWxlUGhvdG9GaWVsZCwgcHJvZmlsZVBob3RvSW5wdXQgfSBmcm9tIFwiLi4vdXRpbHMvdXRpbHMuanNcIjsgXHJcbmltcG9ydCB7IHVwZGF0ZVByb2ZpbGUgfSBmcm9tIFwiLi4vcGFnZXMvaW5kZXguanNcIjtcclxuZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHsgXHJcbiAgY29uc3RydWN0b3IoKSB7IFxyXG4gICAgdGhpcy5hcGkgPSBuZXcgQXBpKCk7IFxyXG4gIH0gXHJcblxyXG4gIGdldFVzZXJJbmZvKCkgeyBcclxuICAgIHJldHVybiB7IFxyXG4gICAgICBuYW1lOiBuYW1lSW5wdXQudmFsdWUsIFxyXG4gICAgICBqb2I6IGpvYklucHV0LnZhbHVlLCBcclxuICAgICAgXHJcbiAgICB9OyBcclxuICB9IFxyXG5cclxuICBzZXRVc2VySW5mbyhuYW1lLCBqb2IsIHBob3RvKSB7IFxyXG4gICAgbmFtZUZpZWxkLnRleHRDb250ZW50ID0gbmFtZTsgXHJcbiAgICBqb2JGaWVsZC50ZXh0Q29udGVudCA9IGpvYjsgXHJcbiAgICBwcm9maWxlUGhvdG9GaWVsZC5zcmMgPSBwaG90bzsgXHJcbiAgfSBcclxufSBcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdChldnQpIHsgXHJcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7IFxyXG5cclxuICBjb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbygpOyBcclxuICBjb25zdCB1c2VySW5mb0RhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpOyBcclxuXHJcbiAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckluZm9EYXRhLm5hbWUsIHVzZXJJbmZvRGF0YS5qb2IsIHVzZXJJbmZvRGF0YS5waG90byk7IFxyXG4gIHVwZGF0ZVByb2ZpbGUoeyBcclxuICAgIG5hbWU6IHVzZXJJbmZvRGF0YS5uYW1lLCBcclxuICAgIGFib3V0OiB1c2VySW5mb0RhdGEuam9iIFxyXG4gIH0pOyBcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGluaXRpYWxpemVQYWdlKCkgeyBcclxuICBjb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbygpOyBcclxuICB1c2VySW5mby5pbml0aWFsaXplUGFnZSgpOyBcclxufSAiLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoZm9ybSkge1xyXG4gICAgdGhpcy5mb3JtID0gZm9ybTtcclxuICAgIHRoaXMuaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RhbF9faW5wdXQnKSk7XHJcbiAgICB0aGlzLmJ1dHRvbkVsZW1lbnQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fYnV0dG9uJyk7XHJcbiAgICB0aGlzLmVycm9yTWVzc2FnZXMgPSB7XHJcbiAgICAgIHZhbHVlTWlzc2luZzogJ0NhbXBvIMOpIG9icmlnYXTDs3Jpby4nLFxyXG4gICAgICB0eXBlTWlzbWF0Y2g6ICdQb3IgZmF2b3IsIGluc2lyYSB1bSBlbmRlcmXDp28gd2ViJyxcclxuICAgICAgdG9vU2hvcnQ6ICdBdW1lbnRlIGVzc2UgdGV4dG8gcGFyYSAyIGNhcmFjdGVyZXMgb3UgbWFpcy4nLFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gaW5wdXRFbGVtZW50Lm5leHRFbGVtZW50U2libGluZzsgLy8gRW5jb250cmEgbyBlbGVtZW50byBkZSBlcnJvIHByw7N4aW1vIGFvIGlucHV0XHJcblxyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ21vZGFsX19pbnB1dF90eXBlX2Vycm9yJyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnbW9kYWxfX2lucHV0LWVycm9yX2FjdGl2ZScpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gaW5wdXRFbGVtZW50Lm5leHRFbGVtZW50U2libGluZztcclxuXHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnbW9kYWxfX2lucHV0X3R5cGVfZXJyb3InKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbF9faW5wdXQtZXJyb3JfYWN0aXZlJyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcclxuICB9XHJcblxyXG4gIF9pc1ZhbGlkKGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gT2JqZWN0LmtleXModGhpcy5lcnJvck1lc3NhZ2VzKS5maW5kKFxyXG4gICAgICAgIChlcnJvcktleSkgPT4gaW5wdXRFbGVtZW50LnZhbGlkaXR5W2Vycm9yS2V5XVxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihcclxuICAgICAgICBpbnB1dEVsZW1lbnQsXHJcbiAgICAgICAgZXJyb3JNZXNzYWdlID8gdGhpcy5lcnJvck1lc3NhZ2VzW2Vycm9yTWVzc2FnZV0gOiAnVmVyaWZpcXVlIG9zIGNhbXBvcyBkaWdpdGFkb3MuJ1xyXG4gICAgICApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLmJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYnV0dG9uX19pbmFjdGl2ZScpO1xyXG4gICAgICB0aGlzLmJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlOyAvLyBEZXNhYmlsaXRhIG8gYm90w6NvIHF1YW5kbyBow6EgY2FtcG9zIGludsOhbGlkb3NcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdidXR0b25fX2luYWN0aXZlJyk7XHJcbiAgICAgIHRoaXMuYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlOyAvLyBIYWJpbGl0YSBvIGJvdMOjbyBxdWFuZG8gdG9kb3Mgb3MgY2FtcG9zIHPDo28gdsOhbGlkb3NcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faXNWYWxpZChpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlcigpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG5cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4vRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3IsIHN1Ym1pdENhbGxiYWNrKSB7XHJcbiAgICBzdXBlcihzZWxlY3Rvcik7XHJcbiAgICB0aGlzLnN1Ym1pdENhbGxiYWNrID0gc3VibWl0Q2FsbGJhY2s7XHJcbiAgICB0aGlzLmZvcm0gPSB0aGlzLnNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fZm9ybScpO1xyXG4gICAgdGhpcy5jbG9zZUJ1dHRvbiA9IHRoaXMuc2VsZWN0b3IucXVlcnlTZWxlY3RvcignLm1vZGFsX19idXR0b24tY2xvc2UnKTtcclxuICAgIHRoaXMuZm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHRoaXMuZm9ybSk7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dExpc3QgPSB0aGlzLmZvcm0ucXVlcnlTZWxlY3RvckFsbCgnLm1vZGFsX19pbnB1dCcpO1xyXG4gICAgY29uc3QgZm9ybVZhbHVlcyA9IHt9O1xyXG4gICAgaW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4ge1xyXG4gICAgICBmb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBmb3JtVmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuZm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTsgLy9tZXRvZG8gcXVlIGZheiBjb20gcXVlIHRvZGEgdmV6IHF1ZSBhYnJpciBvIG1vZGFsIGV1IHJlc2V0YXIgYSB2YWxpZGHDp8Ojb1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB0aGlzLmZvcm0ucmVzZXQoKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IHsgQ2FyZCB9IGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmRcIjtcclxuaW1wb3J0IHsgdG9nZ2xlUGFnZU9wYWNpdHkgfSBmcm9tIFwiLi4vdXRpbHMvdXRpbHMuanNcIjtcclxuaW1wb3J0IHsgVXNlckluZm8sIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm9cIjtcclxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZVwiO1xyXG5pbXBvcnQgeyBBcGkgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuaW1wb3J0IHsgbXlVc2VySWQsIHBhZ2UgfSBmcm9tIFwiLi4vdXRpbHMvdXRpbHMuanNcIjtcclxuXHJcbmNvbnN0IHVzZXIgPSBuZXcgVXNlckluZm8oKTtcclxuLy8gQ2hhbWEgYSBmdW7Dp8OjbyBkZSBpbmljaWFsaXphw6fDo28gZGEgcMOhZ2luYSBxdWFuZG8gYSBww6FnaW5hIGZvciBjYXJyZWdhZGEsIHJlc3BvbnPDoXZlbCBwb3IgY2FycmVnYXIgb3MgZGFkb3MgZG8gcHJvZmlsZSBkbyBzZXJ2aWRvclxyXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKCkgPT4ge1xyXG4gIGFwaS5nZXRQcm9maWxlKClcclxuICAudGhlbihkYXRhID0+IHsgXHJcbiAgICBjb25zdCB7IG5hbWUsIGFib3V0LCBhdmF0YXIgfSA9IGRhdGE7IFxyXG4gICAgdXNlci5zZXRVc2VySW5mbyhuYW1lLCBhYm91dCwgYXZhdGFyKTtcclxuICB9KSBcclxuICAuY2F0Y2goZXJyb3IgPT4geyBcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvIGFvIGNhcnJlZ2FyIGFzIGluZm9ybWHDp8O1ZXMgZG8gcGVyZmlsOlwiLCBlcnJvcik7IFxyXG4gIH0pO1xyXG59KTtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoKTsgXHJcbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtdOyAvLyBJbmljaWFsaXphIGEgdmFyacOhdmVsIGluaXRpYWxDYXJkcyBjb21vIHVtIGFycmF5IHZhemlvLCBzZXLDoSBwcmVlbmNoaWRvIHBlbG9zIGRhZG9zIGRhIEFQSVxyXG5cclxuLy8gRnVuw6fDo28gcGFyYSBwZWdhciBjYXJkcyBpbmljaWFpcyBkbyBzZXJ2aWRvclxyXG5hcGkuZmV0Y2hJbml0aWFsQ2FyZHMoKVxyXG4gIC50aGVuKChyZXMpID0+IHtcclxuICAgIGluaXRpYWxDYXJkcy5wdXNoKC4uLnJlcyk7XHJcblxyXG4gICAgcmVzLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgaWYgKGl0ZW0ub3duZXIuX2lkID09PSBteVVzZXJJZCkge1xyXG4gICAgICAgIC8vY29sb3F1ZWkgdGVtcG8gcGFyYSBhdHJhc2FyIGEgZXhlY3VjYW8gZGEgZnVuY2FvLCBzZW5hbyBvIGNhcmQgbmFvIMOpIHJlbmRlcml6YWRvIG5vIG1vbWVudG8gZGEgZXhlY3VjYW8gZGVzc2EgZnVuY2FvIGUgZGEgZXJyby5cclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHNob3dEZWxldGVCdXR0b24oKSwgMTAwKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBjYXJkTGlzdC5yZW5kZXIoKTtcclxuICB9KTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzaG93RGVsZXRlQnV0dG9uKCkge1xyXG4gIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5lbGVtZW50X19kZWxldGUnKVxyXG4gIGRlbGV0ZUJ1dHRvbi5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICBjb25zdCBjYXJkSWQgPSBpdGVtLmRhdGFzZXQuY2FyZElkO1xyXG4gICAgaWYgKGNhcmRJZCA9PT0gbXlVc2VySWQpIHtcclxuICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKCdlbGVtZW50X19kZWxldGVfYWN0aXZlJylcclxuICAgIH1cclxuICB9KVxyXG59XHJcblxyXG5jb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbi1lZGl0Jyk7XHJcbmNvbnN0IGNsb3NlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19idXR0b24tY2xvc2UnKTtcclxuY29uc3Qgb3Blbk1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5tb2RhbCcsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcclxuY29uc3Qgb3Blbk1vZGFsQWRkID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5tb2RhbC1hZGQnLCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7XHJcbmNvbnN0IG9wZW5Nb2RhbEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKCcubW9kYWwtaW1hZ2UnKTtcclxuXHJcbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgdG9nZ2xlUGFnZU9wYWNpdHkocGFnZSk7XHJcbiAgb3Blbk1vZGFsLm9wZW4oKTtcclxufSk7XHJcblxyXG5jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICB0b2dnbGVQYWdlT3BhY2l0eShwYWdlKTtcclxuICBvcGVuTW9kYWwuY2xvc2UoKTtcclxufSk7XHJcblxyXG5jb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uLWFkZCcpO1xyXG5jb25zdCBidXR0b25DbG9zZUFkZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b24tY2xvc2UnKTtcclxuXHJcbmFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICB0b2dnbGVQYWdlT3BhY2l0eShwYWdlKTtcclxuICBvcGVuTW9kYWxBZGQub3BlbigpO1xyXG59KTtcclxuXHJcbmJ1dHRvbkNsb3NlQWRkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIHRvZ2dsZVBhZ2VPcGFjaXR5KHBhZ2UpO1xyXG4gIG9wZW5Nb2RhbEFkZC5jbG9zZSgpO1xyXG59KTtcclxuXHJcbmNvbnN0IGZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19mb3JtJyk7XHJcblxyXG5mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoZXZ0KTtcclxuICBvcGVuTW9kYWwuY2xvc2UoKTtcclxuICB0b2dnbGVQYWdlT3BhY2l0eShwYWdlKTtcclxufSk7XHJcblxyXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogaXRlbSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChpdGVtLmxpbmssIGl0ZW0ubmFtZSwgaXRlbS5vd25lciwgaXRlbS5faWQsIGl0ZW0ubGlrZXMubGVuZ3RoKTtcclxuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG4gICAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxuICAgIH1cclxuICB9LFxyXG4gICcuZWxlbWVudHMnXHJcbik7XHJcblxyXG5jb25zdCBtb2RhbEZvcm1BZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtYWRkJyk7XHJcbmNvbnN0IGZvcm1BZGRJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fZm9ybV9hZGQnKTtcclxuXHJcbm1vZGFsRm9ybUFkZC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgY29uc3QgaW1hZ2VOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19pbnB1dF90aXRsZScpO1xyXG4gIGNvbnN0IGltYWdlTGluayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9faW5wdXRfbGluaycpO1xyXG4gIGNvbnN0IG93bmVySWQgPSBteVVzZXJJZDsgLy8gSUQgZG8gdXN1w6FyaW8gYXR1YWwsIHN1YnN0aXR1YSBwZWxvIHZhbG9yIGNvcnJldG8gcmVjdXBlcmFkbyBkYSBBUElcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoaW1hZ2VMaW5rLnZhbHVlLCBpbWFnZU5hbWUudmFsdWUsIHsgX2lkOiBteVVzZXJJZCB9KTtcclxuICBjYXJkLmFkZENhcmRUb1NlcnZlcigpO1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHMnKS5wcmVwZW5kKGNhcmRFbGVtZW50KTtcclxuICBvcGVuTW9kYWxBZGQuY2xvc2UoKTtcclxuICB0b2dnbGVQYWdlT3BhY2l0eShwYWdlKTtcclxuICBmb3JtQWRkSW1hZ2UucmVzZXQoKTtcclxufSk7XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2dCkgPT4ge1xyXG4gIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICBvcGVuTW9kYWwuX2hhbmRsZUVzY0Nsb3NlKCk7XHJcbiAgICBvcGVuTW9kYWxBZGQuX2hhbmRsZUVzY0Nsb3NlKCk7XHJcbiAgICBvcGVuTW9kYWxJbWFnZS5jbG9zZSgpO1xyXG4gIH1cclxufSk7XHJcblxyXG5wYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoZXZ0KSA9PiB7XHJcbiAgb3Blbk1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgb3Blbk1vZGFsQWRkLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgb3Blbk1vZGFsSW1hZ2UuY2xvc2UoKTtcclxufSk7XHJcblxyXG5jb25zdCByZW1vdmVFdmVudExpc3RlbmVycyA9ICgpID0+IHtcclxuICBlZGl0QnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgdG9nZ2xlUGFnZU9wYWNpdHkocGFnZSk7XHJcbiAgICBvcGVuTW9kYWwub3BlbigpO1xyXG4gIH0pO1xyXG5cclxuICBjbG9zZUJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIHRvZ2dsZVBhZ2VPcGFjaXR5KHBhZ2UpO1xyXG4gICAgb3Blbk1vZGFsLmNsb3NlKCk7XHJcbiAgfSk7XHJcblxyXG4gIGFkZEJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIHRvZ2dsZVBhZ2VPcGFjaXR5KHBhZ2UpO1xyXG4gICAgb3Blbk1vZGFsQWRkLm9wZW4oKTtcclxuICB9KTtcclxuXHJcbiAgYnV0dG9uQ2xvc2VBZGQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICB0b2dnbGVQYWdlT3BhY2l0eShwYWdlKTtcclxuICAgIG9wZW5Nb2RhbEFkZC5jbG9zZSgpO1xyXG4gIH0pO1xyXG5cclxuICBmb3JtRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdChldnQpO1xyXG4gICAgb3Blbk1vZGFsLmNsb3NlKCk7XHJcbiAgICB0b2dnbGVQYWdlT3BhY2l0eShwYWdlKTtcclxuICB9KTtcclxuXHJcbiAgbW9kYWxGb3JtQWRkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGltYWdlTGluay52YWx1ZSwgaW1hZ2VOYW1lLnZhbHVlKTtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50cycpLnByZXBlbmQoY2FyZEVsZW1lbnQpO1xyXG4gICAgb3Blbk1vZGFsQWRkLmNsb3NlKCk7XHJcbiAgICB0b2dnbGVQYWdlT3BhY2l0eShwYWdlKTtcclxuICB9KTtcclxuXHJcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIG9wZW5Nb2RhbC5faGFuZGxlRXNjQ2xvc2UoKTtcclxuICAgICAgb3Blbk1vZGFsQWRkLl9oYW5kbGVFc2NDbG9zZSgpO1xyXG4gICAgICBvcGVuTW9kYWxJbWFnZS5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBwYWdlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCAoZXZ0KSA9PiB7XHJcbiAgICBvcGVuTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIG9wZW5Nb2RhbEFkZC5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgb3Blbk1vZGFsSW1hZ2UuY2xvc2UoKTtcclxuICB9KTtcclxufTtcclxuXHJcbnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyBJbnN0YW5jaWEgYSBjbGFzc2UgRm9ybVZhbGlkYXRvciBwYXJhIGNhZGEgZm9ybXVsw6FyaW8gZW5jb250cmFkbyBuYSBww6FnaW5hXHJcbmNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubW9kYWxfX2Zvcm0nKSk7XHJcblxyXG5mb3JtTGlzdC5mb3JFYWNoKChmb3JtKSA9PiB7XHJcbiAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybSk7XHJcbiAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxufSk7XHJcblxyXG4vL2FicmlyIG1vZGFsIHBhcmEgZWRpdGFyIHBob3RvIGRvIHBlcmZpbFxyXG5jb25zdCBzaG93TW9kYWxFZGl0UGhvdG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9faW1hZ2Utb3ZlcmxheScpXHJcbmNvbnN0IHNob3dNb2RhbEVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfcGhvdG8nKTtcclxuc2hvd01vZGFsRWRpdFBob3RvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge2NvbnN0IHNob3dNb2RhbEVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfcGhvdG8nKTtcclxuICBzaG93TW9kYWxFZGl0LmNsYXNzTGlzdC5hZGQoJ21vZGFsLXBob3RvJylcclxuICBwYWdlLmNsYXNzTGlzdC5hZGQoJ3BhZ2Vfb3BhY2l0eScpO1xyXG59KTtcclxuXHJcbi8vZmVjaGFyIG1vZGFsIGRlIGVkaXRhciBwaG90byBkbyBwZXJmaWxcclxuY29uc3QgY2xvc2VNb2RhbFBob3RvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbi1jbG9zZS1waG90bycpO1xyXG5jbG9zZU1vZGFsUGhvdG8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgc2hvd01vZGFsRWRpdC5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbC1waG90bycpO1xyXG4gIHBhZ2UuY2xhc3NMaXN0LnJlbW92ZSgncGFnZV9vcGFjaXR5Jyk7XHJcbn0pXHJcblxyXG4vL211ZGEgZm90byBkbyBwZXJmaWwgbmEgQVBJXHJcbmNvbnN0IHByb2ZpbGVQaG90byA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19pbWFnZScpO1xyXG5jb25zdCBidXR0b25TYXZlcGhvdG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2J1dHRvbl9zYXZlJyk7XHJcbmNvbnN0IGlucHV0U2F2ZVBob3RvRmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2lucHV0X3NhdmUtcGhvdG8nKVxyXG5jb25zdCBtb2RhbF9fZm9ybV9lZGl0UGhvdG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Zvcm1fZWRpdFBob3RvJylcclxuYnV0dG9uU2F2ZXBob3RvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIGFwaS51cGRhdGVQcm9maWxlUGljdHVyZShpbnB1dFNhdmVQaG90b0ZpZWxkLnZhbHVlKTtcclxuICBwcm9maWxlUGhvdG8uc3JjID0gaW5wdXRTYXZlUGhvdG9GaWVsZC52YWx1ZTtcclxuICBzaG93TW9kYWxFZGl0LmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLXBob3RvJylcclxuICBwYWdlLmNsYXNzTGlzdC5yZW1vdmUoJ3BhZ2Vfb3BhY2l0eScpO1xyXG4gIG1vZGFsX19mb3JtX2VkaXRQaG90by5yZXNldCgpO1xyXG59KVxyXG5cclxuLy9mYXogdXBkYXRlIGRvIHByb2ZpbGVcclxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVByb2ZpbGUgKGRhdGEpIHtcclxuICBhcGkudXBkYXRlUHJvZmlsZShkYXRhKVxyXG4gIC50aGVuKHVwZGF0ZWRSZXN1bHQgPT4geyBcclxuICAgIGNvbnNvbGUubG9nKFwiRGFkb3MgZGUgcGVyZmlsIGF0dWFsaXphZG9zOlwiLCB1cGRhdGVkUmVzdWx0KTsgXHJcbiAgICB1c2VyLnNldFVzZXJJbmZvKHVwZGF0ZWRSZXN1bHQubmFtZSwgdXBkYXRlZFJlc3VsdC5hYm91dCwgdXBkYXRlZFJlc3VsdC5hdmF0YXIpO1xyXG4gIH0pIFxyXG5cclxuICAuY2F0Y2goZXJyb3IgPT4geyBcclxuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvIGFvIGF0dWFsaXphciBvIHBlcmZpbDpcIiwgZXJyb3IpOyBcclxuICB9KTsgXHJcbn1jb25zdCBjYXJkID0gbmV3IENhcmQoKTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhZGRDYXJkIChjYXJkRGF0YSkge1xyXG4gIGFwaS5hZGRDYXJkKGNhcmREYXRhKVxyXG4gICAgICAudGhlbigoY3JlYXRlZENhcmQpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnQ2FyZCBhZGRlZCB0byBzZXJ2ZXI6JywgY3JlYXRlZENhcmQpO1xyXG4gICAgICAgIC8vIEF0dWFsaXphIG9zIGRhZG9zIGRvIGNhcmQgY29tIG9zIGRhZG9zIHJldG9ybmFkb3MgZG8gc2Vydmlkb3JcclxuICAgICAgICBjYXJkLl9pZCA9IGNyZWF0ZWRDYXJkLmlkO1xyXG4gICAgICAgIGNhcmQuX2xpa2VzQ291bnQgPSBjcmVhdGVkQ2FyZC5saWtlcy5sZW5ndGg7XHJcbiAgICAgICAgY2FyZC5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbnVtYmVyJykudGV4dENvbnRlbnQgPSBjYXJkLl9saWtlc0NvdW50O1xyXG4gICAgICAgIHNob3dEZWxldGVCdXR0b24oKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBhZGQgY2FyZCB0byBzZXJ2ZXI6JywgZXJyb3IpO1xyXG4gICAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZUNhcmQgKGNhcmRJZCkge1xyXG4gIGFwaS5kZWxldGVDYXJkKGNhcmRJZClcclxuICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xyXG4gICAgICAgIGlmIChyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ0NhcmQgZGVsZXRlZCBmcm9tIHNlcnZlci4nKTtcclxuICAgICAgICAgIGNhcmQuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBkZWxldGUgY2FyZCBmcm9tIHNlcnZlcjonLCByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLnN0YXR1c1RleHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBkZWxldGUgY2FyZCBmcm9tIHNlcnZlcjonLCBlcnJvcik7XHJcbiAgICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gbGlrZShpZCkge1xyXG4gIGFwaS5hZGRMaWtlVG9DYXJkKGlkKVxyXG4gICAgLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgIGNhcmQuX2xpa2VzQ291bnQgPSBkYXRhLmxpa2VzLmxlbmd0aDtcclxuICAgICAgY2FyZC5fdXBkYXRlTGlrZXNDb3VudCgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcignRmFsaGEgYW8gY3VydGlyIGNhcmQ6ICcsIGVycm9yKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGRpc2xpa2UoaWQpIHtcclxuICBhcGkucmVtb3ZlTGlrZUZyb21DYXJkKGlkKVxyXG4gICAgLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgIGNhcmQuX2xpa2VzQ291bnQgPSBkYXRhLmxpa2VzLmxlbmd0aDtcclxuICAgICAgY2FyZC5fdXBkYXRlTGlrZXNDb3VudCgpO1xyXG4gICAgICBjb25zb2xlLmxvZyhjYXJkLl9saWtlc0NvdW50KTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byByZW1vdmUgbGlrZSBmcm9tIGNhcmQ6JywgZXJyb3IpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIm5hbWVJbnB1dCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImpvYklucHV0IiwibmFtZUZpZWxkIiwiam9iRmllbGQiLCJwcm9maWxlUGhvdG9GaWVsZCIsInRvZ2dsZVBhZ2VPcGFjaXR5IiwicGFnZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIm15VXNlcklkIiwiUG9wdXAiLCJzZWxlY3RvciIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJ2YWx1ZSIsImFkZCIsInJlbW92ZSIsImNsb3NlIiwiUG9wdXBXaXRoSW1hZ2UiLCJfUG9wdXAiLCJfaW5oZXJpdHMiLCJfc3VwZXIiLCJtb2RhbEltYWdlIiwibW9kYWxJbWdFbGVtZW50IiwiYnRuQ2xvc2UiLCJtb2RhbFRpdGxlIiwicG9wdXBXaXRoSW1hZ2UiLCJtb2RhbERlbGV0ZSIsImNsb3NlQnV0dG9uIiwiY29uZmlybUJ1dHRvbiIsIkNhcmQiLCJpbWFnZUxpbmsiLCJpbWFnZVRpdGxlIiwib3duZXIiLCJpZENhcmQiLCJudW1iZXJPZkxpa2VzIiwiX3RoaXMiLCJfZWxlbWVudCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlRGVsZXRlIiwiX2ltYWdlTGluayIsIl9pbWFnZVRpdGxlIiwiX2dldFRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX293bmVyIiwiX2lkIiwiX2xpa2VzQ291bnQiLCJfaXNMaWtlZCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJzcmNWYWwiLCJnZXRBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJpbWdBbHQiLCJ0ZXh0Q29udGVudCIsIm9wZW4iLCJfdGhpczIiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZ0IiwidGFyZ2V0IiwiY29udGFpbnMiLCJhZGRMaWtlIiwicmVtb3ZlTGlrZSIsImRlbGV0ZUNhcmRGcm9tU2VydmVyIiwiaGFuZGxlQ2xpY2siLCJiaW5kIiwiYWx0IiwiY29uY2F0Iiwic3JjIiwiZGF0YXNldCIsImNhcmRJZCIsImFkZENhcmQiLCJuYW1lIiwibGluayIsImRlbGV0ZUNhcmQiLCJsaWtlIiwiX3VwZGF0ZUxpa2VzQ291bnQiLCJkaXNsaWtlIiwiQXBpIiwiYXV0aG9yaXphdGlvbiIsImJhc2VVcmwiLCJmZXRjaCIsImhlYWRlcnMiLCJ0aGVuIiwicmVzIiwianNvbiIsImNhdGNoIiwiZXJyb3IiLCJjb25zb2xlIiwiaW1hZ2VVcmwiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImF2YXRhciIsImRhdGEiLCJyZXNwb25zZSIsImNhcmREYXRhIiwiY3JlYXRlZENhcmQiLCJVc2VySW5mbyIsImFwaSIsImpvYiIsInBob3RvIiwiaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQiLCJwcmV2ZW50RGVmYXVsdCIsInVzZXJJbmZvIiwidXNlckluZm9EYXRhIiwiZ2V0VXNlckluZm8iLCJzZXRVc2VySW5mbyIsInVwZGF0ZVByb2ZpbGUiLCJhYm91dCIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtIiwiaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImJ1dHRvbkVsZW1lbnQiLCJlcnJvck1lc3NhZ2VzIiwidmFsdWVNaXNzaW5nIiwidHlwZU1pc21hdGNoIiwidG9vU2hvcnQiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwia2V5cyIsImZpbmQiLCJlcnJvcktleSIsIl9zaG93SW5wdXRFcnJvciIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlZCIsInNvbWUiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiX2lzVmFsaWQiLCJTZWN0aW9uIiwiX3JlZiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJQb3B1cFdpdGhGb3JtIiwic3VibWl0Q2FsbGJhY2siLCJmb3JtVmFsaWRhdG9yIiwiZm9ybVZhbHVlcyIsImlucHV0IiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInJlc2V0VmFsaWRhdGlvbiIsInJlc2V0IiwidXNlciIsIndpbmRvdyIsImdldFByb2ZpbGUiLCJpbml0aWFsQ2FyZHMiLCJzaG93RGVsZXRlQnV0dG9uIiwiZmV0Y2hJbml0aWFsQ2FyZHMiLCJwdXNoIiwiYXBwbHkiLCJzZXRUaW1lb3V0IiwiY2FyZExpc3QiLCJyZW5kZXIiLCJlZGl0QnV0dG9uIiwib3Blbk1vZGFsIiwib3Blbk1vZGFsQWRkIiwib3Blbk1vZGFsSW1hZ2UiLCJhZGRCdXR0b24iLCJidXR0b25DbG9zZUFkZCIsImZvcm1FbGVtZW50IiwiY2FyZEVsZW1lbnQiLCJsaWtlcyIsImxlbmd0aCIsImdlbmVyYXRlQ2FyZCIsImFkZEl0ZW0iLCJtb2RhbEZvcm1BZGQiLCJmb3JtQWRkSW1hZ2UiLCJpbWFnZU5hbWUiLCJjYXJkIiwiYWRkQ2FyZFRvU2VydmVyIiwiX2hhbmRsZUVzY0Nsb3NlIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJlbmFibGVWYWxpZGF0aW9uIiwic2hvd01vZGFsRWRpdFBob3RvIiwic2hvd01vZGFsRWRpdCIsInByb2ZpbGVQaG90byIsImJ1dHRvblNhdmVwaG90byIsImlucHV0U2F2ZVBob3RvRmllbGQiLCJtb2RhbF9fZm9ybV9lZGl0UGhvdG8iLCJ1cGRhdGVkUmVzdWx0IiwibG9nIiwidXBkYXRlUHJvZmlsZVBpY3R1cmUiLCJpZCIsIm9rIiwic3RhdHVzIiwic3RhdHVzVGV4dCIsImFkZExpa2VUb0NhcmQiLCJyZW1vdmVMaWtlRnJvbUNhcmQiXSwic291cmNlUm9vdCI6IiJ9